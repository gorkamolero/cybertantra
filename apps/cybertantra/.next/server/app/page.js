(()=>{var a={};a.id=974,a.ids=[974],a.modules={133:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f});var d=c(7385),e=c(6554);function f(){return(0,d.jsx)(e.default,{})}},261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},571:(a,b,c)=>{Promise.resolve().then(c.bind(c,6554))},846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},1169:(a,b,c)=>{Promise.resolve().then(c.bind(c,7987))},2455:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,2359,23)),Promise.resolve().then(c.t.bind(c,1446,23)),Promise.resolve().then(c.t.bind(c,824,23)),Promise.resolve().then(c.t.bind(c,6263,23)),Promise.resolve().then(c.t.bind(c,4639,23)),Promise.resolve().then(c.t.bind(c,2871,23)),Promise.resolve().then(c.t.bind(c,9325,23)),Promise.resolve().then(c.t.bind(c,2665,23)),Promise.resolve().then(c.bind(c,3127))},3033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3454:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>i,metadata:()=>h});var d=c(7385),e=c(5030),f=c.n(e);c(6512);var g=c(5957);let h={title:"~/cybertantra",description:"AI-powered terminal for exploring consciousness"};function i({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{className:`${f().variable} font-mono antialiased`,children:(0,d.jsx)(g.ThemeProvider,{children:a})})})}},3873:a=>{"use strict";a.exports=require("path")},5351:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(5510);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},5706:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>C.a,__next_app__:()=>I,handler:()=>K,pages:()=>H,routeModule:()=>J,tree:()=>G});var d=c(3027),e=c(9164),f=c(7528),g=c(8573),h=c(8267),i=c(8699),j=c(5234),k=c(1759),l=c(2133),m=c(8145),n=c(1958),o=c(2040),p=c(1713),q=c(261),r=c(4328),s=c(221),t=c(6713),u=c(2465),v=c(330),w=c(4206),x=c(451),y=c(6045),z=c(1007),A=c(6439),B=c(417),C=c.n(B),D=c(7833),E=c(4880),F={};for(let a in D)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(F[a]=()=>D[a]);c.d(b,F);let G={children:["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,133)),"/Users/gorkolas/Documents/www/cybertantra/apps/cybertantra/app/page.tsx"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,5351))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(c.bind(c,3454)),"/Users/gorkolas/Documents/www/cybertantra/apps/cybertantra/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,417,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,3813,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,4120,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,8587,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,5351))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,H=["/Users/gorkolas/Documents/www/cybertantra/apps/cybertantra/app/page.tsx"],I={require:c,loadChunk:()=>Promise.resolve()},J=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:G},distDir:".next",projectDir:""});async function K(a,b,c){var d;let B="/page";"/index"===B&&(B="/");let F="false",L=(0,h.getRequestMeta)(a,"postponed"),M=(0,h.getRequestMeta)(a,"minimalMode"),N=await J.prepare(a,b,{srcPage:B,multiZoneDraftMode:F});if(!N)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:O,query:P,params:Q,parsedUrl:R,pageIsDynamic:S,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,serverActionsManifest:W,clientReferenceManifest:X,subresourceIntegrityManifest:Y,prerenderManifest:Z,isDraftMode:$,resolvedPathname:_,revalidateOnlyGenerated:aa,routerServerContext:ab,nextConfig:ac}=N,ad=R.pathname||"/",ae=(0,q.normalizeAppPath)(B),{isOnDemandRevalidate:af}=N,ag=Z.dynamicRoutes[ae],ah=Z.routes[_],ai=!!(ag||ah||Z.routes[ae]),aj=a.headers["user-agent"]||"",ak=(0,t.getBotType)(aj),al=(0,o.isHtmlBotRequest)(a),am=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??!!a.headers[s.NEXT_ROUTER_PREFETCH_HEADER],an=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[s.RSC_HEADER],ao=(0,r.getIsPossibleServerAction)(a),ap=(0,l.checkIsAppPPREnabled)(ac.experimental.ppr)&&(null==(d=Z.routes[ae]??Z.dynamicRoutes[ae])?void 0:d.renderingMode)==="PARTIALLY_STATIC",aq=!1,ar=!1,as=ap?L:void 0,at=ap&&an&&!am,au=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),av=!aj||(0,o.shouldServeStreamingMetadata)(aj,ac.htmlLimitedBots);al&&ap&&(ai=!1,av=!1);let aw=!0===J.isDev||!ai||"string"==typeof L||at,ax=al&&ap,ay=null;$||!ai||aw||ao||as||at||(ay=_);let az=ay;!az&&J.isDev&&(az=_);let aA={...D,tree:G,pages:H,GlobalError:C(),handler:K,routeModule:J,__next_app__:I};W&&X&&(0,n.setReferenceManifestsSingleton)({page:B,clientReferenceManifest:X,serverActionsManifest:W,serverModuleMap:(0,p.createServerModuleMap)({serverActionsManifest:W})});let aB=a.method||"GET",aC=(0,g.getTracer)(),aD=aC.getActiveScopeSpan();try{let d=async(c,d)=>{let e=new k.NodeNextRequest(a),f=new k.NodeNextResponse(b);return J.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aC.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aB} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aB} ${a.url}`)})},f=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:P,params:Q,page:ae,sharedContext:{buildId:O},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aA,Component:(0,j.T)(aA),params:Q,routeModule:J,page:B,postponed:f,shouldWaitOnAllReady:ax,serveStreamingMetadata:av,supportsDynamicResponse:"string"==typeof f||aw,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,subresourceIntegrityManifest:Y,serverActionsManifest:W,clientReferenceManifest:X,setIsrStatus:null==ab?void 0:ab.setIsrStatus,dir:J.projectDir,isDraftMode:$,isRevalidate:ai&&!f&&!at,botType:ak,isOnDemandRevalidate:af,isPossibleServerAction:ao,assetPrefix:ac.assetPrefix,nextConfigOutput:ac.output,crossOrigin:ac.crossOrigin,trailingSlash:ac.trailingSlash,previewProps:Z.preview,deploymentId:ac.deploymentId,enableTainting:ac.experimental.taint,htmlLimitedBots:ac.htmlLimitedBots,devtoolSegmentExplorer:ac.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ac.reactMaxHeadersLength,multiZoneDraftMode:F,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ac.experimental.cacheLife,basePath:ac.basePath,serverActions:ac.experimental.serverActions,...aq?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:aq}:{},experimental:{isRoutePPREnabled:ap,expireTime:ac.expireTime,staleTimes:ac.experimental.staleTimes,dynamicIO:!!ac.experimental.dynamicIO,clientSegmentCache:!!ac.experimental.clientSegmentCache,dynamicOnHover:!!ac.experimental.dynamicOnHover,inlineCss:!!ac.experimental.inlineCss,authInterrupts:!!ac.experimental.authInterrupts,clientTraceMetadata:ac.experimental.clientTraceMetadata||[]},waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>J.onRequestError(a,b,d,ab),err:(0,h.getRequestMeta)(a,"invokeError"),dev:J.isDev}},k=await d(e,i),{metadata:l}=k,{cacheControl:m,headers:n={},fetchTags:o}=l;if(o&&(n[x.NEXT_CACHE_TAGS_HEADER]=o),a.fetchMetrics=l.fetchMetrics,ai&&(null==m?void 0:m.revalidate)===0&&!J.isDev&&!ap){let a=l.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${_}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:u.CachedRouteKind.APP_PAGE,html:k,headers:n,rscData:l.flightData,postponed:l.postponed,status:l.statusCode,segmentData:l.segmentData},cacheControl:m}},l=async({hasResolved:d,previousCacheEntry:g,isRevalidating:i,span:j})=>{let k,l=!1===J.isDev,n=d||b.writableEnded;if(af&&aa&&!g&&!M)return(null==ab?void 0:ab.render404)?await ab.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ag&&(k=(0,v.parseFallbackField)(ag.fallback)),k===v.FallbackMode.PRERENDER&&(0,t.isBot)(aj)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),(null==g?void 0:g.isStale)===-1&&(af=!0),af&&(k!==v.FallbackMode.NOT_FOUND||g)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),!M&&k!==v.FallbackMode.BLOCKING_STATIC_RENDER&&az&&!n&&!$&&S&&(l||!ah)){let b;if((l||ag)&&k===v.FallbackMode.NOT_FOUND)throw new A.NoFallbackError;if(ap&&!an){if(b=await J.handleResponse({cacheKey:l?ae:null,req:a,nextConfig:ac,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:Z,isRoutePPREnabled:ap,responseGenerator:async()=>f({span:j,postponed:void 0,fallbackRouteParams:l||ar?(0,m.u)(ae):null}),waitUntil:c.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=af||i||!as?void 0:as;if(aq&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:u.CachedRouteKind.PAGES,html:w.default.fromStatic(""),pageData:{},headers:void 0,status:void 0}};let p=S&&ap&&((0,h.getRequestMeta)(a,"renderFallbackShell")||ar)?(0,m.u)(ad):null;return f({span:j,postponed:o,fallbackRouteParams:p})},n=async d=>{var g,i,j,k,m;let n,o=await J.handleResponse({cacheKey:ay,responseGenerator:a=>l({span:d,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:af,isRoutePPREnabled:ap,req:a,nextConfig:ac,prerenderManifest:Z,waitUntil:c.waitUntil});if($&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),J.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!o){if(ay)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(g=o.value)?void 0:g.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(j=o.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof o.value.postponed;ai&&!at&&(!p||am)&&(M||b.setHeader("x-nextjs-cache",af?"REVALIDATED":o.isMiss?"MISS":o.isStale?"STALE":"HIT"),b.setHeader(s.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=o;if(as)n={revalidate:0,expire:void 0};else if(M&&an&&!am&&ap)n={revalidate:0,expire:void 0};else if(!J.isDev)if($)n={revalidate:0,expire:void 0};else if(ai){if(o.cacheControl)if("number"==typeof o.cacheControl.revalidate){if(o.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${o.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});n={revalidate:o.cacheControl.revalidate,expire:(null==(k=o.cacheControl)?void 0:k.expire)??ac.expireTime}}else n={revalidate:x.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(n={revalidate:0,expire:void 0});if(o.cacheControl=n,"string"==typeof au&&(null==q?void 0:q.kind)===u.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(m=q.headers)?void 0:m[x.NEXT_CACHE_TAGS_HEADER];M&&ai&&c&&"string"==typeof c&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(au);return void 0!==d?(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(d),cacheControl:o.cacheControl}):(b.statusCode=204,(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(""),cacheControl:o.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...o,value:{...o.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&as)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(M&&ai||delete a[x.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let t=null==(i=q.headers)?void 0:i[x.NEXT_CACHE_TAGS_HEADER];if(M&&ai&&t&&"string"==typeof t&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,t),!q.status||an&&ap||(b.statusCode=q.status),!M&&q.status&&E.RedirectStatusCode[q.status]&&an&&(b.statusCode=200),p&&b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"1"),an&&!$){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:q.html,cacheControl:at?{revalidate:0,expire:void 0}:o.cacheControl})}return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(q.rscData),cacheControl:o.cacheControl})}let v=q.html;if(!p||M)return(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:o.cacheControl});if(aq)return v.chain(new ReadableStream({start(a){a.enqueue(y.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}});let A=new TransformStream;return v.chain(A.readable),f({span:d,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(A.writable)}).catch(a=>{A.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}})};if(!aD)return await aC.withPropagatedContext(a.headers,()=>aC.trace(i.BaseServerSpan.handleRequest,{spanName:`${aB} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aB,"http.target":a.url}},n));await n(aD)}catch(b){throw aD||b instanceof A.NoFallbackError||await J.onRequestError(a,b,{routerKind:"App Router",routePath:B,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ai,isOnDemandRevalidate:af})},ab),b}}},5957:(a,b,c)=>{"use strict";c.d(b,{ThemeProvider:()=>e});var d=c(4253);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gorkolas/Documents/www/cybertantra/apps/cybertantra/app/contexts/ThemeContext.tsx","ThemeProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useTheme() from the server but useTheme is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gorkolas/Documents/www/cybertantra/apps/cybertantra/app/contexts/ThemeContext.tsx","useTheme")},6439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},6512:()=>{},6554:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(4253).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/gorkolas/Documents/www/cybertantra/apps/cybertantra/app/components/CybertantraTerminal.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gorkolas/Documents/www/cybertantra/apps/cybertantra/app/components/CybertantraTerminal.tsx","default")},6713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},7363:(a,b,c)=>{Promise.resolve().then(c.bind(c,8214))},7464:a=>{a.exports=function(a,b){let c;if("function"!=typeof a)throw TypeError(`Expected the first argument to be a \`function\`, got \`${typeof a}\`.`);let d=0;return function(...e){clearTimeout(c);let f=Date.now(),g=b-(f-d);g<=0?(d=f,a.apply(this,e)):c=setTimeout(()=>{d=Date.now(),a.apply(this,e)},g)}}},7987:(a,b,c)=>{"use strict";c.d(b,{D:()=>h,ThemeProvider:()=>g});var d=c(5507),e=c(2358);!function(){var a=Error("Cannot find module '@/app/lib/constants/themes'");throw a.code="MODULE_NOT_FOUND",a}();let f=(0,e.createContext)(void 0);function g({children:a}){let[b,c]=(0,e.useState)("original");return(0,d.jsx)(f.Provider,{value:{theme:b,setTheme:a=>{c(a),localStorage.setItem("terminal-theme",a),(a=>{let b=Object(function(){var a=Error("Cannot find module '@/app/lib/constants/themes'");throw a.code="MODULE_NOT_FOUND",a}())[a],c=document.documentElement;c.style.setProperty("--color-primary",b.colors.primary),c.style.setProperty("--color-secondary",b.colors.secondary),c.style.setProperty("--color-background",b.colors.background),c.style.setProperty("--color-surface",b.colors.surface),c.style.setProperty("--color-text",b.colors.text),c.style.setProperty("--color-input",b.colors.input),c.style.setProperty("--color-cursor",b.colors.cursor),c.style.setProperty("--color-selection",b.colors.selection),c.style.setProperty("--color-error",b.colors.error),c.style.setProperty("--color-glow",b.colors.glow),document.body.className=`theme-${a}`})(a)}},children:a})}function h(){let a=(0,e.useContext)(f);if(!a)throw Error("useTheme must be used within ThemeProvider");return a}},8017:(a,b,c)=>{Promise.resolve().then(c.bind(c,5957))},8031:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,417,23)),Promise.resolve().then(c.t.bind(c,7752,23)),Promise.resolve().then(c.t.bind(c,3470,23)),Promise.resolve().then(c.t.bind(c,2009,23)),Promise.resolve().then(c.t.bind(c,7613,23)),Promise.resolve().then(c.t.bind(c,3573,23)),Promise.resolve().then(c.t.bind(c,3325,23)),Promise.resolve().then(c.t.bind(c,6815,23)),Promise.resolve().then(c.t.bind(c,4213,23))},8214:(a,b,c)=>{"use strict";let d;c.d(b,{default:()=>e8});var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=c(5507),v=c(7987),w=c(2358);let x=(0,w.createContext)(void 0);function y({children:a,config:b}){let[c,d]=(0,w.useState)(""),[e,f]=(0,w.useState)(!1),[g,h]=(0,w.useState)(!1),[i,j]=(0,w.useState)([]),[k,l]=(0,w.useState)(!1),[m,n]=(0,w.useState)("/home/guest"),[o,p]=(0,w.useState)(null),[q,r]=(0,w.useState)(()=>{let a={};return b.browsers?.forEach(b=>{a[b.id]={active:!1,visible:!1,selectedIndex:0}}),a}),s=(0,w.useCallback)((a,b)=>{r(c=>({...c,[a]:{...c[a],...b}}))},[]),t=(0,w.useCallback)(a=>{j(b=>[...b,a])},[]),v=(0,w.useCallback)(()=>{j([])},[]);return(0,u.jsx)(x.Provider,{value:{config:b,input:c,setInput:d,hasInteracted:e,setHasInteracted:f,isWaitingForResponse:g,setIsWaitingForResponse:h,history:i,setHistory:j,addToHistory:t,clearHistory:v,browserStates:q,setBrowserState:s,activeBrowser:o,setActiveBrowser:p,vimModeActive:k,setVimModeActive:l,currentDirectory:m,setCurrentDirectory:n},children:a})}function z(){let a=(0,w.useContext)(x);if(!a)throw Error("useTerminalContext must be used within a TerminalProvider");return a}let A=()=>{let[a,b]=(0,w.useState)(["●","∙","∙"]);return(0,w.useEffect)(()=>{let a=setInterval(()=>{b(a=>{let b=a.findIndex(a=>"●"===a),c=["∙","∙","∙"];return c[(b+1)%3]="●",c})},300);return()=>clearInterval(a)},[]),(0,u.jsxs)("span",{children:["[",a.join(""),"]"]})},B=(0,w.forwardRef)(({value:a,onChange:b,onKeyDown:c,showPlaceholder:d=!1,disabled:e=!1},f)=>{let g=(0,w.useRef)(null),[h,i]=(0,w.useState)(!0);return(0,w.useEffect)(()=>{if(g.current&&f&&"current"in f&&f.current){let b=g.current,c=8*a.length,d=b.offsetWidth;window.innerWidth<640&&c>d-80?i(!1):i(!0)}},[a,f]),(0,u.jsxs)("div",{className:"flex items-center w-full",children:[(0,u.jsx)("span",{className:"mr-2",style:{color:"var(--color-input)"},children:">"}),(0,u.jsxs)("div",{ref:g,className:"flex-1 relative",children:[(0,u.jsx)("input",{ref:f,type:"text",value:a,onChange:a=>b(a.target.value),onKeyDown:c,className:"w-full bg-transparent outline-none caret-transparent",style:{color:"var(--color-primary)"},placeholder:d?"type /help or just chat...":"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,disabled:e}),h&&(0,u.jsx)("span",{className:"absolute top-0 pointer-events-none",style:{left:`${a.length}ch`,color:"var(--color-primary)"},children:e?(0,u.jsx)(A,{}):(0,u.jsx)("span",{className:"inline-block w-2 h-5 animate-pulse",style:{backgroundColor:"var(--color-cursor)"}})})]})]})});function C({children:a}){return(0,u.jsxs)("div",{className:"relative w-full h-screen overflow-hidden bg-black",children:[(0,u.jsx)("div",{className:"absolute inset-0 z-0 pointer-events-none",children:(0,u.jsx)("div",{className:"w-full h-full tron-grid"})}),(0,u.jsx)("div",{className:"absolute inset-0 z-30 pointer-events-none",children:(0,u.jsx)("div",{className:"w-full h-full crt-curve"})}),(0,u.jsx)("div",{className:"relative z-10 w-full h-full crt-content",children:a}),(0,u.jsxs)("div",{className:"pointer-events-none absolute inset-0 z-20",children:[(0,u.jsx)("div",{className:"scanlines"}),(0,u.jsx)("div",{className:"flicker"}),(0,u.jsx)("div",{className:"vignette"}),(0,u.jsx)("div",{className:"rgb-lines"})]}),(0,u.jsx)("div",{className:"pointer-events-none absolute inset-0 z-0",children:(0,u.jsx)("div",{className:"w-full h-full bg-green-400/20 blur-[100px]"})})]})}function D({text:a,onComplete:b}){let[c,d]=(0,w.useState)(""),[e,f]=(0,w.useState)(0);return(0,u.jsxs)(u.Fragment,{children:[c,e<a.length&&(0,u.jsx)("span",{className:"inline-block w-2 bg-green-400 animate-pulse",style:{height:"1em",verticalAlign:"text-bottom"}})]})}function E({isActive:a,initialFile:b="",onClose:c}){let[d,e]=(0,w.useState)("normal"),[f,g]=(0,w.useState)(""),[h,i]=(0,w.useState)(["Welcome to vim.","","Press i to insert, :q to quit.","",""]),[j,k]=(0,w.useState)({line:0,col:0}),[l,m]=(0,w.useState)(""),n=(0,w.useRef)(null);return a?(0,u.jsx)("div",{ref:n,tabIndex:0,className:"fixed inset-0 z-50 bg-black text-green-400 font-mono p-4 outline-none",children:(0,u.jsxs)("div",{className:"h-full flex flex-col",children:[(0,u.jsxs)("div",{className:"text-center text-yellow-300 mb-2",children:[b||"[No Name]"," - VIM"]}),(0,u.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[h.map((a,b)=>(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("span",{className:"text-gray-600 mr-4 select-none",children:String(b+1).padStart(3," ")}),(0,u.jsxs)("span",{children:[a.split("").map((a,c)=>(0,u.jsx)("span",{className:b===j.line&&c===j.col&&"command"!==d?"bg-green-400 text-black":"",children:a||" "},c)),b===j.line&&j.col===a.length&&"command"!==d&&(0,u.jsx)("span",{className:"bg-green-400 text-black animate-pulse",children:" "})]})]},b)),Array.from({length:Math.max(0,20-h.length)}).map((a,b)=>(0,u.jsx)("div",{className:"text-gray-600",children:"~"},`empty-${b}`))]}),(0,u.jsx)("div",{className:"border-t border-green-400 pt-1",children:"command"===d?(0,u.jsx)("div",{children:f}):(0,u.jsx)("div",{children:l})}),(0,u.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:"[i]nsert [:]command [:q]uit [hjkl]move [o]newline [g/G]top/bottom"})]})}):null}B.displayName="TerminalInput";let F={"/help":()=>"SHOW_HELP_BROWSER","/about":()=>({content:`
> gorka

i build things
sometimes they're useful

i get obsessed
disappear into projects for days
emerge with something
sometimes with nothing

then i switch contexts
explore something else
the cycle continues
`,typewriter:!0}),"/work":()=>"SHOW_WORK_BROWSER","/music":()=>"SHOW_MUSIC_PLAYER","/contact":()=>({content:`
╔═══════════════════════════════════════════╗
║        ESTABLISH CONNECTION               ║
╚═══════════════════════════════════════╝

> Opening secure channels...

Email:    gorka.molero@gmail.com
GitHub:   github.com/gorkamolero
Location: Madrid / Lisbon / US

> Professional inquiries welcome
> Consulting opportunities available

> Type /work for project details
> Or just start chatting
`,typewriter:!0}),"/skills":()=>({content:`
╔═══════════════════════════════════════════╗
║       TECH STACK & PREFERENCES            ║
╚═══════════════════════════════════════════╝

PREFERRED STACK:
  [████████████████████] Next.js
  [████████████████████] Vercel
  [████████████████████] Convex DB / PostgreSQL
  [████████████████░░░░] Drizzle ORM
  [██████████████████░░] Bun > Node.js
  [████████████████████] shadcn/ui + Tailwind

AI/ML TOOLS:
  [████████████████████] Vercel AI SDK
  [████████████████░░░░] Mastra / CrewAI for agents
  [████████████████████] Claude (Opus/Sonnet) > all
  [██████████████░░░░░░] Grok for X/Twitter context
  [████████████░░░░░░░░] Kimi K2 (testing)
  [░░░░░░░░░░░░░░░░░░░░] OpenAI

DEV ENVIRONMENT:
  [████████████████████] Claude Code
  [████████████████████] Opencode + Zed Editor
  [░░░░░░░░░░░░░░░░░░░░] Cursor/Windsurf

CREATIVE:
  [████████████████████] Ableton Live
  [████████████████░░░░] Max/MSP
  [████████████████████] Music Production

> Strong opinions, loosely held (but mostly strong)
`,typewriter:!0}),"/resume":()=>"SHOW_RESUME_BROWSER","/themes":a=>0===a.length?"SHOW_THEME_BROWSER":`CHANGE_THEME:${a[0]}`,"/theme":a=>0===a.length?"SHOW_THEME_BROWSER":`CHANGE_THEME:${a[0]}`};function G(a,b){if("/resume"===a&&b.length>0){let a=b[0].toLowerCase();switch(a){case"pdf":return`
> Initiating download: gorka_molero_resume.pdf
> Format: PDF (Professional Layout)

[!] PDF generation in progress...
[!] For now, try: /resume txt or /resume json
`;case"txt":return`
> Generating plain text resume...
> Accessing /api/resume?format=txt...

════════════════════════════════════════════

GORKA MOLERO
Engineer, Builder, Reality Hacker
Madrid / Lisbon / Remote

CONTACT
GitHub: github.com/gorkamolero
Studio: bravura.studio

SUMMARY
Full-Stack Engineer with expertise in modern web
technologies, AI integration, and creative coding.
Passionate about building elegant solutions that
bridge technology and human experience.

RECENT EXPERIENCE

Web Developer | Roadie
Dec 2023 - Present
• Building striking Backstage platform
• Modern UI patterns & performance optimization

Software Engineer | Typeshare.co
Nov 2022 - Dec 2023
• Led AI-first 2.0 version development
• Managed UI architecture with Tiptap editor

Co-founder & CTO | Maility
Nov 2022 - Present
• Grew to 20K MRR in 6 months
• Built scalable email automation platform

TECH STACK
• Next.js + Vercel
• Convex DB / PostgreSQL + Drizzle
• Bun > Node.js
• shadcn/ui + Tailwind
• Claude Code + Zed
• Vercel AI SDK + Mastra/CrewAI
• Claude > Grok > Kimi > OpenAI

INTERESTS
X/Twitter + TPOT, Music Production, Chess,
BJJ/Boxing, Philosophy, Crypto, AI/AGI

════════════════════════════════════════════

> Full resume: curl /api/resume?format=txt
`;case"json":return`
> Exporting resume data as JSON...
> Accessing /api/resume?format=json...

{
  "name": "Gorka Molero",
  "title": "Senior Full-Stack Engineer & Digital Creator",
  "location": "Madrid, Spain",
  "contact": {
    "github": "github.com/gorkamolero",
    "studio": "bravura.studio"
  },
  "experience": [
    {
      "title": "Senior UI Engineer",
      "company": "Current Company",
      "period": "2022 - Present"
    },
    {
      "title": "Creative Technologist",
      "company": "Bravura Studio",
      "period": "2018 - Present"
    }
  ],
  "stack": [
    "Next.js + Vercel",
    "Convex DB / PostgreSQL",
    "Bun > Node.js",
    "Claude Code (NOT Cursor)"
  ],
  "ai_preferences": {
    "preferred": "Claude (Opus/Sonnet)",
    "testing": "Kimi K2",
    "avoid": "OpenAI (if possible)"
  }
}

> Full JSON: curl /api/resume
`;default:return`Unknown format: ${a}
Available formats: pdf, txt, json`}}return a in F?F[a](b):""}class H{constructor(){this.currentPath=[],this.root={name:"/",type:"directory",children:new Map([["home",{name:"home",type:"directory",children:new Map([["gorka",{name:"gorka",type:"directory",children:new Map([["projects",{name:"projects",type:"directory",children:new Map([["README.md",{name:"README.md",type:"file",content:"# My Projects\n\nCheck out /work for interactive project browser!"}],["the-pulse.txt",{name:"the-pulse.txt",type:"file",content:"Non-linear storytelling engine inspired by Lovecraft.\nSeparates narrative structure from sequential plot."}]])}],["music",{name:"music",type:"directory",children:new Map([["tracks.txt",{name:"tracks.txt",type:"file",content:"My tracks:\n- Regret (Piano)\n- Forget (Piano)\n- Thumos (Electronic)\n- Elohim (Electronic)\n\nType /music to play!"}]])}],[".secrets",{name:".secrets",type:"file",content:'You found the hidden file!\n\n"The only way to deal with an unfree world is to become so absolutely free that your very existence is an act of rebellion."'}]])}]])}],["etc",{name:"etc",type:"directory",children:new Map([["motd",{name:"motd",type:"file",content:"Welcome to Gorka's terminal.\nAnother visitor from the void.\nSpeak."}]])}]])}}getCurrentPath(){return"/"+this.currentPath.join("/")}getCurrentDir(){let a=this.root;for(let b of this.currentPath){if(!a.children?.has(b))return null;a=a.children.get(b)}return a}cd(a){if("/"===a)return this.currentPath=[],this.getCurrentPath();if("~"===a)return this.currentPath=["home","gorka"],this.getCurrentPath();if(".."===a)return this.currentPath.length>0&&this.currentPath.pop(),this.getCurrentPath();if(a.startsWith("/")){let b=a.split("/").filter(a=>a),c=[],d=this.root;for(let e of b){if(!d.children?.has(e))return`cd: ${a}: No such file or directory`;let b=d.children.get(e);if("directory"!==b.type)return`cd: ${a}: Not a directory`;c.push(e),d=b}return this.currentPath=c,this.getCurrentPath()}{let b=this.getCurrentDir();return b&&b.children?.has(a)?"directory"!==b.children.get(a).type?`cd: ${a}: Not a directory`:(this.currentPath.push(a),this.getCurrentPath()):`cd: ${a}: No such file or directory`}}ls(a=!1){let b=this.getCurrentDir();return b&&b.children?Array.from(b.children.values()).filter(b=>a||!b.name.startsWith(".")).map(a=>"directory"===a.type?a.name+"/":a.name).sort():[]}cat(a){let b=this.getCurrentDir();if(!b||!b.children)return`cat: ${a}: No such file or directory`;let c=b.children.get(a);return c?"directory"===c.type?`cat: ${a}: Is a directory`:c.content||"":`cat: ${a}: No such file or directory`}pwd(){return this.getCurrentPath()||"/"}}let I=new H;var J="vercel.ai.error",K=Symbol.for(J),L=class a extends Error{constructor({name:a,message:b,cause:c}){super(b),this[e]=!0,this.name=a,this.cause=c}static isInstance(b){return a.hasMarker(b,J)}static hasMarker(a,b){let c=Symbol.for(b);return null!=a&&"object"==typeof a&&c in a&&"boolean"==typeof a[c]&&!0===a[c]}};e=K;var M=L;function N(a){return null==a?"unknown error":"string"==typeof a?a:a instanceof Error?a.message:JSON.stringify(a)}Symbol.for("vercel.ai.error.AI_APICallError"),Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError");var O="AI_InvalidArgumentError",P=`vercel.ai.error.${O}`,Q=Symbol.for(P),R=class extends M{constructor({message:a,cause:b,argument:c}){super({name:O,message:a,cause:b}),this[f]=!0,this.argument=c}static isInstance(a){return M.hasMarker(a,P)}};f=Q,Symbol.for("vercel.ai.error.AI_InvalidPromptError"),Symbol.for("vercel.ai.error.AI_InvalidResponseDataError");var S="AI_JSONParseError",T=`vercel.ai.error.${S}`,U=Symbol.for(T),V=class extends M{constructor({text:a,cause:b}){super({name:S,message:`JSON parsing failed: Text: ${a}.
Error message: ${N(b)}`,cause:b}),this[g]=!0,this.text=a}static isInstance(a){return M.hasMarker(a,T)}};g=U,Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError"),Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError");var W="AI_TypeValidationError",X=`vercel.ai.error.${W}`,Y=Symbol.for(X),Z=class a extends M{constructor({value:a,cause:b}){super({name:W,message:`Type validation failed: Value: ${JSON.stringify(a)}.
Error message: ${N(b)}`,cause:b}),this[h]=!0,this.value=a}static isInstance(a){return M.hasMarker(a,X)}static wrap({value:b,cause:c}){return a.isInstance(c)&&c.value===b?c:new a({value:b,cause:c})}};h=Y;Symbol.for("vercel.ai.error.AI_UnsupportedFunctionalityError");class $ extends Error{constructor(a,b){super(a),this.name="ParseError",this.type=b.type,this.field=b.field,this.value=b.value,this.line=b.line}}function _(a){}class aa extends TransformStream{constructor({onError:a,onRetry:b,onComment:c}={}){let d;super({start(e){d=function(a){if("function"==typeof a)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:b=_,onError:c=_,onRetry:d=_,onComment:e}=a,f="",g=!0,h,i="",j="";function k(a){if(""===a)return void(i.length>0&&b({id:h,event:j||void 0,data:i.endsWith(`
`)?i.slice(0,-1):i}),h=void 0,i="",j="");if(a.startsWith(":")){e&&e(a.slice(a.startsWith(": ")?2:1));return}let c=a.indexOf(":");if(-1!==c){let b=a.slice(0,c),d=" "===a[c+1]?2:1;l(b,a.slice(c+d),a);return}l(a,"",a)}function l(a,b,e){switch(a){case"event":j=b;break;case"data":i=`${i}${b}
`;break;case"id":h=b.includes("\0")?void 0:b;break;case"retry":/^\d+$/.test(b)?d(parseInt(b,10)):c(new $(`Invalid \`retry\` value: "${b}"`,{type:"invalid-retry",value:b,line:e}));break;default:c(new $(`Unknown field "${a.length>20?`${a.slice(0,20)}\u2026`:a}"`,{type:"unknown-field",field:a,value:b,line:e}))}}return{feed:function(a){let b=g?a.replace(/^\xEF\xBB\xBF/,""):a,[c,d]=function(a){let b=[],c="",d=0;for(;d<a.length;){let e=a.indexOf("\r",d),f=a.indexOf(`
`,d),g=-1;if(-1!==e&&-1!==f?g=Math.min(e,f):-1!==e?g=e:-1!==f&&(g=f),-1===g){c=a.slice(d);break}{let c=a.slice(d,g);b.push(c),"\r"===a[(d=g+1)-1]&&a[d]===`
`&&d++}}return[b,c]}(`${f}${b}`);for(let a of c)k(a);f=d,g=!1},reset:function(a={}){f&&a.consume&&k(f),g=!0,h=void 0,i="",j="",f=""}}}({onEvent:a=>{e.enqueue(a)},onError(b){"terminate"===a?e.error(b):"function"==typeof a&&a(b)},onRetry:b,onComment:c})},transform(a){d.feed(a)}})}}Symbol("ZodOutput"),Symbol("ZodInput");class ab{constructor(){this._map=new Map,this._idmap=new Map}add(a,...b){let c=b[0];if(this._map.set(a,c),c&&"object"==typeof c&&"id"in c){if(this._idmap.has(c.id))throw Error(`ID ${c.id} already exists in the registry`);this._idmap.set(c.id,a)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(a){let b=this._map.get(a);return b&&"object"==typeof b&&"id"in b&&this._idmap.delete(b.id),this._map.delete(a),this}get(a){let b=a._zod.parent;if(b){let c={...this.get(b)??{}};delete c.id;let d={...c,...this._map.get(a)};return Object.keys(d).length?d:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}let ac=new ab;function ad(a){let b=Object.values(a).filter(a=>"number"==typeof a);return Object.entries(a).filter(([a,c])=>-1===b.indexOf(+a)).map(([a,b])=>b)}function ae(a,b){return"bigint"==typeof b?b.toString():b}function af(a){return{get value(){{let b=a();return Object.defineProperty(this,"value",{value:b}),b}}}}function ag(a){let b=+!!a.startsWith("^"),c=a.endsWith("$")?a.length-1:a.length;return a.slice(b,c)}function ah(a,b,c){Object.defineProperty(a,b,{get(){{let d=c();return a[b]=d,d}},set(c){Object.defineProperty(a,b,{value:c})},configurable:!0})}function ai(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!0,configurable:!0})}function aj(...a){let b={};for(let c of a)Object.assign(b,Object.getOwnPropertyDescriptors(c));return Object.defineProperties({},b)}function ak(a){return JSON.stringify(a)}let al="captureStackTrace"in Error?Error.captureStackTrace:(...a)=>{};function am(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}let an=af(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(a){return!1}});function ao(a){if(!1===am(a))return!1;let b=a.constructor;if(void 0===b)return!0;let c=b.prototype;return!1!==am(c)&&!1!==Object.prototype.hasOwnProperty.call(c,"isPrototypeOf")}let ap=new Set(["string","number","symbol"]);function aq(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ar(a,b,c){let d=new a._zod.constr(b??a._zod.def);return(!b||c?.parent)&&(d._zod.parent=a),d}function as(a){if(!a)return{};if("string"==typeof a)return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");a.error=a.message}return(delete a.message,"string"==typeof a.error)?{...a,error:()=>a.error}:a}let at={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function au(a,b=0){for(let c=b;c<a.issues.length;c++)if(a.issues[c]?.continue!==!0)return!0;return!1}function av(a,b){return b.map(b=>(b.path??(b.path=[]),b.path.unshift(a),b))}function aw(a){return"string"==typeof a?a:a?.message}function ax(a,b,c){let d={...a,path:a.path??[]};return a.message||(d.message=aw(a.inst?._zod.def?.error?.(a))??aw(b?.error?.(a))??aw(c.customError?.(a))??aw(c.localeError?.(a))??"Invalid input"),delete d.inst,delete d.continue,b?.reportInput||delete d.input,d}function ay(a){return Array.isArray(a)?"array":"string"==typeof a?"string":"unknown"}function az(...a){let[b,c,d]=a;return"string"==typeof b?{message:b,code:"custom",input:c,inst:d}:{...b}}class aA{constructor(a){this.counter=0,this.metadataRegistry=a?.metadata??ac,this.target=a?.target??"draft-2020-12",this.unrepresentable=a?.unrepresentable??"throw",this.override=a?.override??(()=>{}),this.io=a?.io??"output",this.seen=new Map}process(a,b={path:[],schemaPath:[]}){var c;let d=a._zod.def,e=this.seen.get(a);if(e)return e.count++,b.schemaPath.includes(a)&&(e.cycle=b.path),e.schema;let f={schema:{},count:1,cycle:void 0,path:b.path};this.seen.set(a,f);let g=a._zod.toJSONSchema?.();if(g)f.schema=g;else{let c={...b,schemaPath:[...b.schemaPath,a],path:b.path},e=a._zod.parent;if(e)f.ref=e,this.process(e,c),this.seen.get(e).isParent=!0;else{let b=f.schema;switch(d.type){case"string":{b.type="string";let{minimum:c,maximum:d,format:e,patterns:g,contentEncoding:h}=a._zod.bag;if("number"==typeof c&&(b.minLength=c),"number"==typeof d&&(b.maxLength=d),e&&(b.format=({guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""})[e]??e,""===b.format&&delete b.format),h&&(b.contentEncoding=h),g&&g.size>0){let a=[...g];1===a.length?b.pattern=a[0].source:a.length>1&&(f.schema.allOf=[...a.map(a=>({..."draft-7"===this.target?{type:"string"}:{},pattern:a.source}))])}break}case"number":{let{minimum:c,maximum:d,format:e,multipleOf:f,exclusiveMaximum:g,exclusiveMinimum:h}=a._zod.bag;"string"==typeof e&&e.includes("int")?b.type="integer":b.type="number","number"==typeof h&&(b.exclusiveMinimum=h),"number"==typeof c&&(b.minimum=c,"number"==typeof h&&(h>=c?delete b.minimum:delete b.exclusiveMinimum)),"number"==typeof g&&(b.exclusiveMaximum=g),"number"==typeof d&&(b.maximum=d,"number"==typeof g&&(g<=d?delete b.maximum:delete b.exclusiveMaximum)),"number"==typeof f&&(b.multipleOf=f);break}case"boolean":case"success":b.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema");break;case"null":b.type="null";break;case"any":case"unknown":break;case"undefined":if("throw"===this.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema");break;case"void":if("throw"===this.unrepresentable)throw Error("Void cannot be represented in JSON Schema");break;case"never":b.not={};break;case"date":if("throw"===this.unrepresentable)throw Error("Date cannot be represented in JSON Schema");break;case"array":{let{minimum:e,maximum:f}=a._zod.bag;"number"==typeof e&&(b.minItems=e),"number"==typeof f&&(b.maxItems=f),b.type="array",b.items=this.process(d.element,{...c,path:[...c.path,"items"]});break}case"object":{b.type="object",b.properties={};let a=d.shape;for(let d in a)b.properties[d]=this.process(a[d],{...c,path:[...c.path,"properties",d]});let e=new Set([...new Set(Object.keys(a))].filter(a=>{let b=d.shape[a]._zod;return"input"===this.io?void 0===b.optin:void 0===b.optout}));e.size>0&&(b.required=Array.from(e)),d.catchall?._zod.def.type==="never"?b.additionalProperties=!1:d.catchall?d.catchall&&(b.additionalProperties=this.process(d.catchall,{...c,path:[...c.path,"additionalProperties"]})):"output"===this.io&&(b.additionalProperties=!1);break}case"union":b.anyOf=d.options.map((a,b)=>this.process(a,{...c,path:[...c.path,"anyOf",b]}));break;case"intersection":{let a=this.process(d.left,{...c,path:[...c.path,"allOf",0]}),e=this.process(d.right,{...c,path:[...c.path,"allOf",1]}),f=a=>"allOf"in a&&1===Object.keys(a).length;b.allOf=[...f(a)?a.allOf:[a],...f(e)?e.allOf:[e]];break}case"tuple":{b.type="array";let e=d.items.map((a,b)=>this.process(a,{...c,path:[...c.path,"prefixItems",b]}));if("draft-2020-12"===this.target?b.prefixItems=e:b.items=e,d.rest){let a=this.process(d.rest,{...c,path:[...c.path,"items"]});"draft-2020-12"===this.target?b.items=a:b.additionalItems=a}d.rest&&(b.items=this.process(d.rest,{...c,path:[...c.path,"items"]}));let{minimum:f,maximum:g}=a._zod.bag;"number"==typeof f&&(b.minItems=f),"number"==typeof g&&(b.maxItems=g);break}case"record":b.type="object",b.propertyNames=this.process(d.keyType,{...c,path:[...c.path,"propertyNames"]}),b.additionalProperties=this.process(d.valueType,{...c,path:[...c.path,"additionalProperties"]});break;case"map":if("throw"===this.unrepresentable)throw Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw Error("Set cannot be represented in JSON Schema");break;case"enum":{let a=ad(d.entries);a.every(a=>"number"==typeof a)&&(b.type="number"),a.every(a=>"string"==typeof a)&&(b.type="string"),b.enum=a;break}case"literal":{let a=[];for(let b of d.values)if(void 0===b){if("throw"===this.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof b)if("throw"===this.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else a.push(Number(b));else a.push(b);if(0===a.length);else if(1===a.length){let c=a[0];b.type=null===c?"null":typeof c,b.const=c}else a.every(a=>"number"==typeof a)&&(b.type="number"),a.every(a=>"string"==typeof a)&&(b.type="string"),a.every(a=>"boolean"==typeof a)&&(b.type="string"),a.every(a=>null===a)&&(b.type="null"),b.enum=a;break}case"file":{let c={type:"string",format:"binary",contentEncoding:"binary"},{minimum:d,maximum:e,mime:f}=a._zod.bag;void 0!==d&&(c.minLength=d),void 0!==e&&(c.maxLength=e),f?1===f.length?(c.contentMediaType=f[0],Object.assign(b,c)):b.anyOf=f.map(a=>({...c,contentMediaType:a})):Object.assign(b,c);break}case"transform":if("throw"===this.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema");break;case"nullable":b.anyOf=[this.process(d.innerType,c),{type:"null"}];break;case"nonoptional":case"promise":case"optional":this.process(d.innerType,c),f.ref=d.innerType;break;case"default":this.process(d.innerType,c),f.ref=d.innerType,b.default=JSON.parse(JSON.stringify(d.defaultValue));break;case"prefault":this.process(d.innerType,c),f.ref=d.innerType,"input"===this.io&&(b._prefault=JSON.parse(JSON.stringify(d.defaultValue)));break;case"catch":{let a;this.process(d.innerType,c),f.ref=d.innerType;try{a=d.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}b.default=a;break}case"nan":if("throw"===this.unrepresentable)throw Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{let c=a._zod.pattern;if(!c)throw Error("Pattern not found in template literal");b.type="string",b.pattern=c.source;break}case"pipe":{let a="input"===this.io?"transform"===d.in._zod.def.type?d.out:d.in:d.out;this.process(a,c),f.ref=a;break}case"readonly":this.process(d.innerType,c),f.ref=d.innerType,b.readOnly=!0;break;case"lazy":{let b=a._zod.innerType;this.process(b,c),f.ref=b;break}case"custom":if("throw"===this.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema")}}}let h=this.metadataRegistry.get(a);return h&&Object.assign(f.schema,h),"input"===this.io&&function a(b,c){let d=c??{seen:new Set};if(d.seen.has(b))return!1;d.seen.add(b);let e=b._zod.def;switch(e.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":return!1;case"array":return a(e.element,d);case"object":for(let b in e.shape)if(a(e.shape[b],d))return!0;return!1;case"union":for(let b of e.options)if(a(b,d))return!0;return!1;case"intersection":return a(e.left,d)||a(e.right,d);case"tuple":for(let b of e.items)if(a(b,d))return!0;if(e.rest&&a(e.rest,d))return!0;return!1;case"record":case"map":return a(e.keyType,d)||a(e.valueType,d);case"set":return a(e.valueType,d);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return a(e.innerType,d);case"lazy":return a(e.getter(),d);case"transform":return!0;case"pipe":return a(e.in,d)||a(e.out,d)}throw Error(`Unknown schema type: ${e.type}`)}(a)&&(delete f.schema.examples,delete f.schema.default),"input"===this.io&&f.schema._prefault&&((c=f.schema).default??(c.default=f.schema._prefault)),delete f.schema._prefault,this.seen.get(a).schema}emit(a,b){let c={cycles:b?.cycles??"ref",reused:b?.reused??"inline",external:b?.external??void 0},d=this.seen.get(a);if(!d)throw Error("Unprocessed schema. This is a bug in Zod.");let e=a=>{let b="draft-2020-12"===this.target?"$defs":"definitions";if(c.external){let d=c.external.registry.get(a[0])?.id,e=c.external.uri??(a=>a);if(d)return{ref:e(d)};let f=a[1].defId??a[1].schema.id??`schema${this.counter++}`;return a[1].defId=f,{defId:f,ref:`${e("__shared")}#/${b}/${f}`}}if(a[1]===d)return{ref:"#"};let e=`#/${b}/`,f=a[1].schema.id??`__schema${this.counter++}`;return{defId:f,ref:e+f}},f=a=>{if(a[1].schema.$ref)return;let b=a[1],{ref:c,defId:d}=e(a);b.def={...b.schema},d&&(b.defId=d);let f=b.schema;for(let a in f)delete f[a];f.$ref=c};if("throw"===c.cycles)for(let a of this.seen.entries()){let b=a[1];if(b.cycle)throw Error(`Cycle detected: #/${b.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let b of this.seen.entries()){let d=b[1];if(a===b[0]){f(b);continue}if(c.external){let d=c.external.registry.get(b[0])?.id;if(a!==b[0]&&d){f(b);continue}}if(this.metadataRegistry.get(b[0])?.id||d.cycle||d.count>1&&"ref"===c.reused){f(b);continue}}let g=(a,b)=>{let c=this.seen.get(a),d=c.def??c.schema,e={...d};if(null===c.ref)return;let f=c.ref;if(c.ref=null,f){g(f,b);let a=this.seen.get(f).schema;a.$ref&&"draft-7"===b.target?(d.allOf=d.allOf??[],d.allOf.push(a)):(Object.assign(d,a),Object.assign(d,e))}c.isParent||this.override({zodSchema:a,jsonSchema:d,path:c.path??[]})};for(let a of[...this.seen.entries()].reverse())g(a[0],{target:this.target});let h={};if("draft-2020-12"===this.target?h.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?h.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),c.external?.uri){let b=c.external.registry.get(a)?.id;if(!b)throw Error("Schema is missing an `id` property");h.$id=c.external.uri(b)}Object.assign(h,d.def);let i=c.external?.defs??{};for(let a of this.seen.entries()){let b=a[1];b.def&&b.defId&&(i[b.defId]=b.def)}c.external||Object.keys(i).length>0&&("draft-2020-12"===this.target?h.$defs=i:h.definitions=i);try{return JSON.parse(JSON.stringify(h))}catch(a){throw Error("Error converting schema to JSON.")}}}function aB(a,b,c){function d(c,d){var e;for(let f in Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(e=c._zod).traits??(e.traits=new Set),c._zod.traits.add(a),b(c,d),g.prototype)f in c||Object.defineProperty(c,f,{value:g.prototype[f].bind(c)});c._zod.constr=g,c._zod.def=d}let e=c?.Parent??Object;class f extends e{}function g(a){var b;let e=c?.Parent?new f:this;for(let c of(d(e,a),(b=e._zod).deferred??(b.deferred=[]),e._zod.deferred))c();return e}return Object.defineProperty(f,"name",{value:a}),Object.defineProperty(g,"init",{value:d}),Object.defineProperty(g,Symbol.hasInstance,{value:b=>!!c?.Parent&&b instanceof c.Parent||b?._zod?.traits?.has(a)}),Object.defineProperty(g,"name",{value:a}),g}Object.freeze({status:"aborted"}),Symbol("zod_brand");class aC extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}let aD={};function aE(a){return a&&Object.assign(aD,a),aD}let aF=(a,b)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:b,enumerable:!1}),a.message=JSON.stringify(b,ae,2),Object.defineProperty(a,"toString",{value:()=>a.message,enumerable:!1})},aG=aB("$ZodError",aF),aH=aB("$ZodError",aF,{Parent:Error}),aI=a=>(b,c,d)=>{let e=d?{...d,async:!1}:{async:!1},f=b._zod.run({value:c,issues:[]},e);if(f instanceof Promise)throw new aC;return f.issues.length?{success:!1,error:new(a??aG)(f.issues.map(a=>ax(a,e,aE())))}:{success:!0,data:f.value}},aJ=aI(aH),aK=a=>async(b,c,d)=>{let e=d?Object.assign(d,{async:!0}):{async:!0},f=b._zod.run({value:c,issues:[]},e);return f instanceof Promise&&(f=await f),f.issues.length?{success:!1,error:new a(f.issues.map(a=>ax(a,e,aE())))}:{success:!0,data:f.value}},aL=aK(aH),aM=(a,b)=>{aG.init(a,b),a.name="ZodError",Object.defineProperties(a,{format:{value:b=>(function(a,b){let c=b||function(a){return a.message},d={_errors:[]},e=a=>{for(let b of a.issues)if("invalid_union"===b.code&&b.errors.length)b.errors.map(a=>e({issues:a}));else if("invalid_key"===b.code)e({issues:b.issues});else if("invalid_element"===b.code)e({issues:b.issues});else if(0===b.path.length)d._errors.push(c(b));else{let a=d,e=0;for(;e<b.path.length;){let d=b.path[e];e===b.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(c(b))):a[d]=a[d]||{_errors:[]},a=a[d],e++}}};return e(a),d})(a,b)},flatten:{value:b=>(function(a,b=a=>a.message){let c={},d=[];for(let e of a.issues)e.path.length>0?(c[e.path[0]]=c[e.path[0]]||[],c[e.path[0]].push(b(e))):d.push(b(e));return{formErrors:d,fieldErrors:c}})(a,b)},addIssue:{value:b=>{a.issues.push(b),a.message=JSON.stringify(a.issues,ae,2)}},addIssues:{value:b=>{a.issues.push(...b),a.message=JSON.stringify(a.issues,ae,2)}},isEmpty:{get:()=>0===a.issues.length}})};aB("ZodError",aM);let aN=aB("ZodError",aM,{Parent:Error}),aO=(a,b,c,d)=>{let e=c?Object.assign(c,{async:!1}):{async:!1},f=a._zod.run({value:b,issues:[]},e);if(f instanceof Promise)throw new aC;if(f.issues.length){let a=new(d?.Err??aN)(f.issues.map(a=>ax(a,e,aE())));throw al(a,d?.callee),a}return f.value},aP=async(a,b,c,d)=>{let e=c?Object.assign(c,{async:!0}):{async:!0},f=a._zod.run({value:b,issues:[]},e);if(f instanceof Promise&&(f=await f),f.issues.length){let a=new(d?.Err??aN)(f.issues.map(a=>ax(a,e,aE())));throw al(a,d?.callee),a}return f.value},aQ=aI(aN),aR=aK(aN),aS=Symbol("Let zodToJsonSchema decide on which parser to use"),aT={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"};i||(i={});let aU=(a,b)=>{let c=0;for(;c<a.length&&c<b.length&&a[c]===b[c];c++);return[(a.length-c).toString(),...b.slice(c)].join("/")};function aV(a){if("openAi"!==a.target)return{};let b=[...a.basePath,a.definitionPath,a.openAiAnyTypeName];return a.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===a.$refStrategy?aU(b,a.currentPath):b.join("/")}}function aW(a,b,c,d){d?.errorMessages&&c&&(a.errorMessage={...a.errorMessage,[b]:c})}function aX(a,b,c,d,e){a[b]=c,aW(a,b,d,e)}function aY(a,b){return a7(a.type._def,b)}let aZ={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===d&&(d=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),d),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function a$(a,b){let c={type:"string"};if(a.checks)for(let d of a.checks)switch(d.kind){case"min":aX(c,"minLength","number"==typeof c.minLength?Math.max(c.minLength,d.value):d.value,d.message,b);break;case"max":aX(c,"maxLength","number"==typeof c.maxLength?Math.min(c.maxLength,d.value):d.value,d.message,b);break;case"email":switch(b.emailStrategy){case"format:email":a1(c,"email",d.message,b);break;case"format:idn-email":a1(c,"idn-email",d.message,b);break;case"pattern:zod":a2(c,aZ.email,d.message,b)}break;case"url":a1(c,"uri",d.message,b);break;case"uuid":a1(c,"uuid",d.message,b);break;case"regex":a2(c,d.regex,d.message,b);break;case"cuid":a2(c,aZ.cuid,d.message,b);break;case"cuid2":a2(c,aZ.cuid2,d.message,b);break;case"startsWith":a2(c,RegExp(`^${a_(d.value,b)}`),d.message,b);break;case"endsWith":a2(c,RegExp(`${a_(d.value,b)}$`),d.message,b);break;case"datetime":a1(c,"date-time",d.message,b);break;case"date":a1(c,"date",d.message,b);break;case"time":a1(c,"time",d.message,b);break;case"duration":a1(c,"duration",d.message,b);break;case"length":aX(c,"minLength","number"==typeof c.minLength?Math.max(c.minLength,d.value):d.value,d.message,b),aX(c,"maxLength","number"==typeof c.maxLength?Math.min(c.maxLength,d.value):d.value,d.message,b);break;case"includes":a2(c,RegExp(a_(d.value,b)),d.message,b);break;case"ip":"v6"!==d.version&&a1(c,"ipv4",d.message,b),"v4"!==d.version&&a1(c,"ipv6",d.message,b);break;case"base64url":a2(c,aZ.base64url,d.message,b);break;case"jwt":a2(c,aZ.jwt,d.message,b);break;case"cidr":"v6"!==d.version&&a2(c,aZ.ipv4Cidr,d.message,b),"v4"!==d.version&&a2(c,aZ.ipv6Cidr,d.message,b);break;case"emoji":a2(c,aZ.emoji(),d.message,b);break;case"ulid":a2(c,aZ.ulid,d.message,b);break;case"base64":switch(b.base64Strategy){case"format:binary":a1(c,"binary",d.message,b);break;case"contentEncoding:base64":aX(c,"contentEncoding","base64",d.message,b);break;case"pattern:zod":a2(c,aZ.base64,d.message,b)}break;case"nanoid":a2(c,aZ.nanoid,d.message,b)}return c}function a_(a,b){return"escape"===b.patternStrategy?function(a){let b="";for(let c=0;c<a.length;c++)a0.has(a[c])||(b+="\\"),b+=a[c];return b}(a):a}let a0=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function a1(a,b,c,d){a.format||a.anyOf?.some(a=>a.format)?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format,...a.errorMessage&&d.errorMessages&&{errorMessage:{format:a.errorMessage.format}}}),delete a.format,a.errorMessage&&(delete a.errorMessage.format,0===Object.keys(a.errorMessage).length&&delete a.errorMessage)),a.anyOf.push({format:b,...c&&d.errorMessages&&{errorMessage:{format:c}}})):aX(a,"format",b,c,d)}function a2(a,b,c,d){a.pattern||a.allOf?.some(a=>a.pattern)?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern,...a.errorMessage&&d.errorMessages&&{errorMessage:{pattern:a.errorMessage.pattern}}}),delete a.pattern,a.errorMessage&&(delete a.errorMessage.pattern,0===Object.keys(a.errorMessage).length&&delete a.errorMessage)),a.allOf.push({pattern:a3(b,d),...c&&d.errorMessages&&{errorMessage:{pattern:c}}})):aX(a,"pattern",a3(b,d),c,d)}function a3(a,b){if(!b.applyRegexFlags||!a.flags)return a.source;let c={i:a.flags.includes("i"),m:a.flags.includes("m"),s:a.flags.includes("s")},d=c.i?a.source.toLowerCase():a.source,e="",f=!1,g=!1,h=!1;for(let a=0;a<d.length;a++){if(f){e+=d[a],f=!1;continue}if(c.i){if(g){if(d[a].match(/[a-z]/)){h?(e+=d[a],e+=`${d[a-2]}-${d[a]}`.toUpperCase(),h=!1):"-"===d[a+1]&&d[a+2]?.match(/[a-z]/)?(e+=d[a],h=!0):e+=`${d[a]}${d[a].toUpperCase()}`;continue}}else if(d[a].match(/[a-z]/)){e+=`[${d[a]}${d[a].toUpperCase()}]`;continue}}if(c.m){if("^"===d[a]){e+=`(^|(?<=[\r
]))`;continue}else if("$"===d[a]){e+=`($|(?=[\r
]))`;continue}}if(c.s&&"."===d[a]){e+=g?`${d[a]}\r
`:`[${d[a]}\r
]`;continue}e+=d[a],"\\"===d[a]?f=!0:g&&"]"===d[a]?g=!1:g||"["!==d[a]||(g=!0)}try{new RegExp(e)}catch{return console.warn(`Could not convert regex pattern at ${b.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),a.source}return e}function a4(a,b){if("openAi"===b.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===b.target&&a.keyType?._def.typeName===i.ZodEnum)return{type:"object",required:a.keyType._def.values,properties:a.keyType._def.values.reduce((c,d)=>({...c,[d]:a7(a.valueType._def,{...b,currentPath:[...b.currentPath,"properties",d]})??aV(b)}),{}),additionalProperties:b.rejectedAdditionalProperties};let c={type:"object",additionalProperties:a7(a.valueType._def,{...b,currentPath:[...b.currentPath,"additionalProperties"]})??b.allowedAdditionalProperties};if("openApi3"===b.target)return c;if(a.keyType?._def.typeName===i.ZodString&&a.keyType._def.checks?.length){let{type:d,...e}=a$(a.keyType._def,b);return{...c,propertyNames:e}}if(a.keyType?._def.typeName===i.ZodEnum)return{...c,propertyNames:{enum:a.keyType._def.values}};if(a.keyType?._def.typeName===i.ZodBranded&&a.keyType._def.type._def.typeName===i.ZodString&&a.keyType._def.type._def.checks?.length){let{type:d,...e}=aY(a.keyType._def,b);return{...c,propertyNames:e}}return c}let a5={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},a6=(a,b)=>{let c=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((a,c)=>a7(a._def,{...b,currentPath:[...b.currentPath,"anyOf",`${c}`]})).filter(a=>!!a&&(!b.strictUnions||"object"==typeof a&&Object.keys(a).length>0));return c.length?{anyOf:c}:void 0};function a7(a,b,c=!1){let d=b.seen.get(a);if(b.override){let e=b.override?.(a,b,d,c);if(e!==aS)return e}if(d&&!c){let a=a8(d,b);if(void 0!==a)return a}let e={def:a,path:b.currentPath,jsonSchema:void 0};b.seen.set(a,e);let f=((a,b,c)=>{switch(b){case i.ZodString:return a$(a,c);case i.ZodNumber:var d,e,f,g,h,j,k,l,m,n=a,o=c;let p={type:"number"};if(!n.checks)return p;for(let a of n.checks)switch(a.kind){case"int":p.type="integer",aW(p,"type",a.message,o);break;case"min":"jsonSchema7"===o.target?a.inclusive?aX(p,"minimum",a.value,a.message,o):aX(p,"exclusiveMinimum",a.value,a.message,o):(a.inclusive||(p.exclusiveMinimum=!0),aX(p,"minimum",a.value,a.message,o));break;case"max":"jsonSchema7"===o.target?a.inclusive?aX(p,"maximum",a.value,a.message,o):aX(p,"exclusiveMaximum",a.value,a.message,o):(a.inclusive||(p.exclusiveMaximum=!0),aX(p,"maximum",a.value,a.message,o));break;case"multipleOf":aX(p,"multipleOf",a.value,a.message,o)}return p;case i.ZodObject:return function(a,b){let c="openAi"===b.target,d={type:"object",properties:{}},e=[],f=a.shape();for(let a in f){let g=f[a];if(void 0===g||void 0===g._def)continue;let h=function(a){try{return a.isOptional()}catch{return!0}}(g);h&&c&&("ZodOptional"===g._def.typeName&&(g=g._def.innerType),g.isNullable()||(g=g.nullable()),h=!1);let i=a7(g._def,{...b,currentPath:[...b.currentPath,"properties",a],propertyPath:[...b.currentPath,"properties",a]});void 0!==i&&(d.properties[a]=i,h||e.push(a))}e.length&&(d.required=e);let g=function(a,b){if("ZodNever"!==a.catchall._def.typeName)return a7(a.catchall._def,{...b,currentPath:[...b.currentPath,"additionalProperties"]});switch(a.unknownKeys){case"passthrough":return b.allowedAdditionalProperties;case"strict":return b.rejectedAdditionalProperties;case"strip":return"strict"===b.removeAdditionalStrategy?b.allowedAdditionalProperties:b.rejectedAdditionalProperties}}(a,b);return void 0!==g&&(d.additionalProperties=g),d}(a,c);case i.ZodBigInt:var q=a,r=c;let s={type:"integer",format:"int64"};if(!q.checks)return s;for(let a of q.checks)switch(a.kind){case"min":"jsonSchema7"===r.target?a.inclusive?aX(s,"minimum",a.value,a.message,r):aX(s,"exclusiveMinimum",a.value,a.message,r):(a.inclusive||(s.exclusiveMinimum=!0),aX(s,"minimum",a.value,a.message,r));break;case"max":"jsonSchema7"===r.target?a.inclusive?aX(s,"maximum",a.value,a.message,r):aX(s,"exclusiveMaximum",a.value,a.message,r):(a.inclusive||(s.exclusiveMaximum=!0),aX(s,"maximum",a.value,a.message,r));break;case"multipleOf":aX(s,"multipleOf",a.value,a.message,r)}return s;case i.ZodBoolean:return{type:"boolean"};case i.ZodDate:return function a(b,c,d){let e=d??c.dateStrategy;if(Array.isArray(e))return{anyOf:e.map((d,e)=>a(b,c,d))};switch(e){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":var f=b,g=c;let h={type:"integer",format:"unix-time"};if("openApi3"===g.target)return h;for(let a of f.checks)switch(a.kind){case"min":aX(h,"minimum",a.value,a.message,g);break;case"max":aX(h,"maximum",a.value,a.message,g)}return h}}(a,c);case i.ZodUndefined:return{not:aV(c)};case i.ZodNull:return"openApi3"===c.target?{enum:["null"],nullable:!0}:{type:"null"};case i.ZodArray:var t=a,u=c;let v={type:"array"};return t.type?._def&&t.type?._def?.typeName!==i.ZodAny&&(v.items=a7(t.type._def,{...u,currentPath:[...u.currentPath,"items"]})),t.minLength&&aX(v,"minItems",t.minLength.value,t.minLength.message,u),t.maxLength&&aX(v,"maxItems",t.maxLength.value,t.maxLength.message,u),t.exactLength&&(aX(v,"minItems",t.exactLength.value,t.exactLength.message,u),aX(v,"maxItems",t.exactLength.value,t.exactLength.message,u)),v;case i.ZodUnion:case i.ZodDiscriminatedUnion:var w=a,x=c;if("openApi3"===x.target)return a6(w,x);let y=w.options instanceof Map?Array.from(w.options.values()):w.options;if(y.every(a=>a._def.typeName in a5&&(!a._def.checks||!a._def.checks.length))){let a=y.reduce((a,b)=>{let c=a5[b._def.typeName];return c&&!a.includes(c)?[...a,c]:a},[]);return{type:a.length>1?a:a[0]}}if(y.every(a=>"ZodLiteral"===a._def.typeName&&!a.description)){let a=y.reduce((a,b)=>{let c=typeof b._def.value;switch(c){case"string":case"number":case"boolean":return[...a,c];case"bigint":return[...a,"integer"];case"object":if(null===b._def.value)return[...a,"null"];default:return a}},[]);if(a.length===y.length){let b=a.filter((a,b,c)=>c.indexOf(a)===b);return{type:b.length>1?b:b[0],enum:y.reduce((a,b)=>a.includes(b._def.value)?a:[...a,b._def.value],[])}}}else if(y.every(a=>"ZodEnum"===a._def.typeName))return{type:"string",enum:y.reduce((a,b)=>[...a,...b._def.values.filter(b=>!a.includes(b))],[])};return a6(w,x);case i.ZodIntersection:var z=a,A=c;let B=[a7(z.left._def,{...A,currentPath:[...A.currentPath,"allOf","0"]}),a7(z.right._def,{...A,currentPath:[...A.currentPath,"allOf","1"]})].filter(a=>!!a),C="jsonSchema2019-09"===A.target?{unevaluatedProperties:!1}:void 0,D=[];return B.forEach(a=>{if((!("type"in a)||"string"!==a.type)&&"allOf"in a)D.push(...a.allOf),void 0===a.unevaluatedProperties&&(C=void 0);else{let b=a;if("additionalProperties"in a&&!1===a.additionalProperties){let{additionalProperties:c,...d}=a;b=d}else C=void 0;D.push(b)}}),D.length?{allOf:D,...C}:void 0;case i.ZodTuple:return d=a,e=c,d.rest?{type:"array",minItems:d.items.length,items:d.items.map((a,b)=>a7(a._def,{...e,currentPath:[...e.currentPath,"items",`${b}`]})).reduce((a,b)=>void 0===b?a:[...a,b],[]),additionalItems:a7(d.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:d.items.length,maxItems:d.items.length,items:d.items.map((a,b)=>a7(a._def,{...e,currentPath:[...e.currentPath,"items",`${b}`]})).reduce((a,b)=>void 0===b?a:[...a,b],[])};case i.ZodRecord:return a4(a,c);case i.ZodLiteral:var E=a,F=c;let G=typeof E.value;return"bigint"!==G&&"number"!==G&&"boolean"!==G&&"string"!==G?{type:Array.isArray(E.value)?"array":"object"}:"openApi3"===F.target?{type:"bigint"===G?"integer":G,enum:[E.value]}:{type:"bigint"===G?"integer":G,const:E.value};case i.ZodEnum:return{type:"string",enum:Array.from(a.values)};case i.ZodNativeEnum:var H=a;let I=H.values,J=Object.keys(H.values).filter(a=>"number"!=typeof I[I[a]]).map(a=>I[a]),K=Array.from(new Set(J.map(a=>typeof a)));return{type:1===K.length?"string"===K[0]?"string":"number":["string","number"],enum:J};case i.ZodNullable:var L=a,M=c;if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(L.innerType._def.typeName)&&(!L.innerType._def.checks||!L.innerType._def.checks.length))return"openApi3"===M.target?{type:a5[L.innerType._def.typeName],nullable:!0}:{type:[a5[L.innerType._def.typeName],"null"]};if("openApi3"===M.target){let a=a7(L.innerType._def,{...M,currentPath:[...M.currentPath]});return a&&"$ref"in a?{allOf:[a],nullable:!0}:a&&{...a,nullable:!0}}let N=a7(L.innerType._def,{...M,currentPath:[...M.currentPath,"anyOf","0"]});return N&&{anyOf:[N,{type:"null"}]};case i.ZodOptional:var O=a,P=c;if(P.currentPath.toString()===P.propertyPath?.toString())return a7(O.innerType._def,P);let Q=a7(O.innerType._def,{...P,currentPath:[...P.currentPath,"anyOf","1"]});return Q?{anyOf:[{not:aV(P)},Q]}:aV(P);case i.ZodMap:return f=a,"record"===(g=c).mapStrategy?a4(f,g):{type:"array",maxItems:125,items:{type:"array",items:[a7(f.keyType._def,{...g,currentPath:[...g.currentPath,"items","items","0"]})||aV(g),a7(f.valueType._def,{...g,currentPath:[...g.currentPath,"items","items","1"]})||aV(g)],minItems:2,maxItems:2}};case i.ZodSet:var R=a,S=c;let T={type:"array",uniqueItems:!0,items:a7(R.valueType._def,{...S,currentPath:[...S.currentPath,"items"]})};return R.minSize&&aX(T,"minItems",R.minSize.value,R.minSize.message,S),R.maxSize&&aX(T,"maxItems",R.maxSize.value,R.maxSize.message,S),T;case i.ZodLazy:return()=>a.getter()._def;case i.ZodPromise:return a7(a.type._def,c);case i.ZodNaN:case i.ZodNever:return"openAi"===(h=c).target?void 0:{not:aV({...h,currentPath:[...h.currentPath,"not"]})};case i.ZodEffects:return j=a,"input"===(k=c).effectStrategy?a7(j.schema._def,k):aV(k);case i.ZodAny:case i.ZodUnknown:return aV(c);case i.ZodDefault:return l=a,m=c,{...a7(l.innerType._def,m),default:l.defaultValue()};case i.ZodBranded:return aY(a,c);case i.ZodReadonly:case i.ZodCatch:return a7(a.innerType._def,c);case i.ZodPipeline:var U=a,V=c;if("input"===V.pipeStrategy)return a7(U.in._def,V);if("output"===V.pipeStrategy)return a7(U.out._def,V);let W=a7(U.in._def,{...V,currentPath:[...V.currentPath,"allOf","0"]}),X=a7(U.out._def,{...V,currentPath:[...V.currentPath,"allOf",W?"1":"0"]});return{allOf:[W,X].filter(a=>void 0!==a)};case i.ZodFunction:case i.ZodVoid:case i.ZodSymbol:default:return}})(a,a.typeName,b),g="function"==typeof f?a7(f(),b):f;if(g&&a9(a,b,g),b.postProcess){let c=b.postProcess(g,a,b);return e.jsonSchema=g,c}return e.jsonSchema=g,g}let a8=(a,b)=>{switch(b.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:aU(b.currentPath,a.path)};case"none":case"seen":if(a.path.length<b.currentPath.length&&a.path.every((a,c)=>b.currentPath[c]===a))return console.warn(`Recursive reference detected at ${b.currentPath.join("/")}! Defaulting to any`),aV(b);return"seen"===b.$refStrategy?aV(b):void 0}},a9=(a,b,c)=>(a.description&&(c.description=a.description,b.markdownDescription&&(c.markdownDescription=a.description)),c);var ba=({prefix:a,size:b=16,alphabet:c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:d="-"}={})=>{let e=()=>{let a=c.length,d=Array(b);for(let e=0;e<b;e++)d[e]=c[Math.random()*a|0];return d.join("")};if(null==a)return e;if(c.includes(d))throw new R({argument:"separator",message:`The separator "${d}" must not be part of the alphabet "${c}".`});return()=>`${a}${d}${e()}`},bb=ba(),bc=/"__proto__"\s*:/,bd=/"constructor"\s*:/,be=Symbol.for("vercel.ai.validator");async function bf({value:a,schema:b}){let c=await bg({value:a,schema:b});if(!c.success)throw Z.wrap({value:a,cause:c.error});return c.value}async function bg({value:a,schema:b}){var c;let d="object"==typeof b&&null!==b&&be in b&&!0===b[be]&&"validate"in b?b:(c=b,{[be]:!0,validate:async a=>{let b=await c["~standard"].validate(a);return null==b.issues?{success:!0,value:b.value}:{success:!1,error:new Z({value:a,cause:b.issues})}}});try{if(null==d.validate)return{success:!0,value:a,rawValue:a};let b=await d.validate(a);if(b.success)return{success:!0,value:b.value,rawValue:a};return{success:!1,error:Z.wrap({value:a,cause:b.error}),rawValue:a}}catch(b){return{success:!1,error:Z.wrap({value:a,cause:b}),rawValue:a}}}async function bh({text:a,schema:b}){try{let c=function(a){let{stackTraceLimit:b}=Error;Error.stackTraceLimit=0;try{let b=JSON.parse(a);return null===b||"object"!=typeof b||!1===bc.test(a)&&!1===bd.test(a)?b:function(a){let b=[a];for(;b.length;){let a=b;for(let c of(b=[],a)){if(Object.prototype.hasOwnProperty.call(c,"__proto__")||Object.prototype.hasOwnProperty.call(c,"constructor")&&Object.prototype.hasOwnProperty.call(c.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let a in c){let d=c[a];d&&"object"==typeof d&&b.push(d)}}}return a}(b)}finally{Error.stackTraceLimit=b}}(a);if(null==b)return{success:!0,value:c,rawValue:c};return await bg({value:c,schema:b})}catch(b){return{success:!1,error:V.isInstance(b)?b:new V({text:a,cause:b}),rawValue:void 0}}}async function bi(a){return"function"==typeof a&&(a=a()),Promise.resolve(a)}var bj=Symbol.for("vercel.ai.schema");function bk(a,{validate:b}={}){return{[bj]:!0,_type:void 0,[be]:!0,jsonSchema:a,validate:b}}var{btoa:bl,atob:bm}=globalThis;let bn=/^[cC][^\s-]{8,}$/,bo=/^[0-9a-z]+$/,bp=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,bq=/^[0-9a-vA-V]{20}$/,br=/^[A-Za-z0-9]{27}$/,bs=/^[a-zA-Z0-9_-]{21}$/,bt=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,bu=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,bv=a=>a?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${a}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,bw=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,bx=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,by=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,bz=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,bA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,bB=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,bC=/^[A-Za-z0-9_-]*$/,bD=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,bE=/^\+(?:[0-9]){6,14}[0-9]$/,bF="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",bG=RegExp(`^${bF}$`);function bH(a){let b="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof a.precision?-1===a.precision?`${b}`:0===a.precision?`${b}:[0-5]\\d`:`${b}:[0-5]\\d\\.\\d{${a.precision}}`:`${b}(?::[0-5]\\d(?:\\.\\d+)?)?`}let bI=/^\d+$/,bJ=/^-?\d+(?:\.\d+)?/i,bK=/true|false/i,bL=/null/i,bM=/^[^A-Z]*$/,bN=/^[^a-z]*$/,bO=aB("$ZodCheck",(a,b)=>{var c;a._zod??(a._zod={}),a._zod.def=b,(c=a._zod).onattach??(c.onattach=[])}),bP={number:"number",bigint:"bigint",object:"date"},bQ=aB("$ZodCheckLessThan",(a,b)=>{bO.init(a,b);let c=bP[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.maximum:c.exclusiveMaximum)??1/0;b.value<d&&(b.inclusive?c.maximum=b.value:c.exclusiveMaximum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value<=b.value:d.value<b.value)||d.issues.push({origin:c,code:"too_big",maximum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),bR=aB("$ZodCheckGreaterThan",(a,b)=>{bO.init(a,b);let c=bP[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.minimum:c.exclusiveMinimum)??-1/0;b.value>d&&(b.inclusive?c.minimum=b.value:c.exclusiveMinimum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value>=b.value:d.value>b.value)||d.issues.push({origin:c,code:"too_small",minimum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),bS=aB("$ZodCheckMultipleOf",(a,b)=>{bO.init(a,b),a._zod.onattach.push(a=>{var c;(c=a._zod.bag).multipleOf??(c.multipleOf=b.value)}),a._zod.check=c=>{if(typeof c.value!=typeof b.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof c.value?c.value%b.value===BigInt(0):0===function(a,b){let c=(a.toString().split(".")[1]||"").length,d=(b.toString().split(".")[1]||"").length,e=c>d?c:d;return Number.parseInt(a.toFixed(e).replace(".",""))%Number.parseInt(b.toFixed(e).replace(".",""))/10**e}(c.value,b.value))||c.issues.push({origin:typeof c.value,code:"not_multiple_of",divisor:b.value,input:c.value,inst:a,continue:!b.abort})}}),bT=aB("$ZodCheckNumberFormat",(a,b)=>{bO.init(a,b),b.format=b.format||"float64";let c=b.format?.includes("int"),d=c?"int":"number",[e,f]=at[b.format];a._zod.onattach.push(a=>{let d=a._zod.bag;d.format=b.format,d.minimum=e,d.maximum=f,c&&(d.pattern=bI)}),a._zod.check=g=>{let h=g.value;if(c){if(!Number.isInteger(h))return void g.issues.push({expected:d,format:b.format,code:"invalid_type",input:h,inst:a});if(!Number.isSafeInteger(h))return void(h>0?g.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}):g.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}))}h<e&&g.issues.push({origin:"number",input:h,code:"too_small",minimum:e,inclusive:!0,inst:a,continue:!b.abort}),h>f&&g.issues.push({origin:"number",input:h,code:"too_big",maximum:f,inst:a})}}),bU=aB("$ZodCheckMaxLength",(a,b)=>{var c;bO.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;if(d.length<=b.maximum)return;let e=ay(d);c.issues.push({origin:e,code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),bV=aB("$ZodCheckMinLength",(a,b)=>{var c;bO.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;if(d.length>=b.minimum)return;let e=ay(d);c.issues.push({origin:e,code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),bW=aB("$ZodCheckLengthEquals",(a,b)=>{var c;bO.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.length,c.maximum=b.length,c.length=b.length}),a._zod.check=c=>{let d=c.value,e=d.length;if(e===b.length)return;let f=ay(d),g=e>b.length;c.issues.push({origin:f,...g?{code:"too_big",maximum:b.length}:{code:"too_small",minimum:b.length},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),bX=aB("$ZodCheckStringFormat",(a,b)=>{var c,d;bO.init(a,b),a._zod.onattach.push(a=>{let c=a._zod.bag;c.format=b.format,b.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(b.pattern))}),b.pattern?(c=a._zod).check??(c.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:b.format,input:c.value,...b.pattern?{pattern:b.pattern.toString()}:{},inst:a,continue:!b.abort})}):(d=a._zod).check??(d.check=()=>{})}),bY=aB("$ZodCheckRegex",(a,b)=>{bX.init(a,b),a._zod.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:"regex",input:c.value,pattern:b.pattern.toString(),inst:a,continue:!b.abort})}}),bZ=aB("$ZodCheckLowerCase",(a,b)=>{b.pattern??(b.pattern=bM),bX.init(a,b)}),b$=aB("$ZodCheckUpperCase",(a,b)=>{b.pattern??(b.pattern=bN),bX.init(a,b)}),b_=aB("$ZodCheckIncludes",(a,b)=>{bO.init(a,b);let c=aq(b.includes),d=new RegExp("number"==typeof b.position?`^.{${b.position}}${c}`:c);b.pattern=d,a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(d)}),a._zod.check=c=>{c.value.includes(b.includes,b.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:b.includes,input:c.value,inst:a,continue:!b.abort})}}),b0=aB("$ZodCheckStartsWith",(a,b)=>{bO.init(a,b);let c=RegExp(`^${aq(b.prefix)}.*`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.startsWith(b.prefix)||c.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:b.prefix,input:c.value,inst:a,continue:!b.abort})}}),b1=aB("$ZodCheckEndsWith",(a,b)=>{bO.init(a,b);let c=RegExp(`.*${aq(b.suffix)}$`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.endsWith(b.suffix)||c.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:b.suffix,input:c.value,inst:a,continue:!b.abort})}}),b2=aB("$ZodCheckOverwrite",(a,b)=>{bO.init(a,b),a._zod.check=a=>{a.value=b.tx(a.value)}});class b3{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if("function"==typeof a){a(this,{execution:"sync"}),a(this,{execution:"async"});return}let b=a.split("\n").filter(a=>a),c=Math.min(...b.map(a=>a.length-a.trimStart().length));for(let a of b.map(a=>a.slice(c)).map(a=>" ".repeat(2*this.indent)+a))this.content.push(a)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(a=>`  ${a}`)].join("\n"))}}let b4={major:4,minor:0,patch:10},b5=aB("$ZodType",(a,b)=>{var c;a??(a={}),a._zod.def=b,a._zod.bag=a._zod.bag||{},a._zod.version=b4;let d=[...a._zod.def.checks??[]];for(let b of(a._zod.traits.has("$ZodCheck")&&d.unshift(a),d))for(let c of b._zod.onattach)c(a);if(0===d.length)(c=a._zod).deferred??(c.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{let b=(a,b,c)=>{let d,e=au(a);for(let f of b){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(e)continue;let b=a.issues.length,g=f._zod.check(a);if(g instanceof Promise&&c?.async===!1)throw new aC;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,a.issues.length!==b&&(e||(e=au(a,b)))});else{if(a.issues.length===b)continue;e||(e=au(a,b))}}return d?d.then(()=>a):a};a._zod.run=(c,e)=>{let f=a._zod.parse(c,e);if(f instanceof Promise){if(!1===e.async)throw new aC;return f.then(a=>b(a,d,e))}return b(f,d,e)}}a["~standard"]={validate:b=>{try{let c=aJ(a,b);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return aL(a,b).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),b6=aB("$ZodString",(a,b)=>{b5.init(a,b),a._zod.pattern=[...a?._zod.bag?.patterns??[]].pop()??(a=>{let b=a?`[\\s\\S]{${a?.minimum??0},${a?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${b}$`)})(a._zod.bag),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=String(c.value)}catch(a){}return"string"==typeof c.value||c.issues.push({expected:"string",code:"invalid_type",input:c.value,inst:a}),c}}),b7=aB("$ZodStringFormat",(a,b)=>{bX.init(a,b),b6.init(a,b)}),b8=aB("$ZodGUID",(a,b)=>{b.pattern??(b.pattern=bu),b7.init(a,b)}),b9=aB("$ZodUUID",(a,b)=>{if(b.version){let a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[b.version];if(void 0===a)throw Error(`Invalid UUID version: "${b.version}"`);b.pattern??(b.pattern=bv(a))}else b.pattern??(b.pattern=bv());b7.init(a,b)}),ca=aB("$ZodEmail",(a,b)=>{b.pattern??(b.pattern=bw),b7.init(a,b)}),cb=aB("$ZodURL",(a,b)=>{b7.init(a,b),a._zod.check=c=>{try{let d=c.value.trim(),e=new URL(d);b.hostname&&(b.hostname.lastIndex=0,b.hostname.test(e.hostname)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:bD.source,input:c.value,inst:a,continue:!b.abort})),b.protocol&&(b.protocol.lastIndex=0,b.protocol.test(e.protocol.endsWith(":")?e.protocol.slice(0,-1):e.protocol)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:b.protocol.source,input:c.value,inst:a,continue:!b.abort})),b.normalize?c.value=e.href:c.value=d;return}catch(d){c.issues.push({code:"invalid_format",format:"url",input:c.value,inst:a,continue:!b.abort})}}}),cc=aB("$ZodEmoji",(a,b)=>{b.pattern??(b.pattern=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),b7.init(a,b)}),cd=aB("$ZodNanoID",(a,b)=>{b.pattern??(b.pattern=bs),b7.init(a,b)}),ce=aB("$ZodCUID",(a,b)=>{b.pattern??(b.pattern=bn),b7.init(a,b)}),cf=aB("$ZodCUID2",(a,b)=>{b.pattern??(b.pattern=bo),b7.init(a,b)}),cg=aB("$ZodULID",(a,b)=>{b.pattern??(b.pattern=bp),b7.init(a,b)}),ch=aB("$ZodXID",(a,b)=>{b.pattern??(b.pattern=bq),b7.init(a,b)}),ci=aB("$ZodKSUID",(a,b)=>{b.pattern??(b.pattern=br),b7.init(a,b)}),cj=aB("$ZodISODateTime",(a,b)=>{b.pattern??(b.pattern=function(a){let b=bH({precision:a.precision}),c=["Z"];a.local&&c.push(""),a.offset&&c.push("([+-]\\d{2}:\\d{2})");let d=`${b}(?:${c.join("|")})`;return RegExp(`^${bF}T(?:${d})$`)}(b)),b7.init(a,b)}),ck=aB("$ZodISODate",(a,b)=>{b.pattern??(b.pattern=bG),b7.init(a,b)}),cl=aB("$ZodISOTime",(a,b)=>{b.pattern??(b.pattern=RegExp(`^${bH(b)}$`)),b7.init(a,b)}),cm=aB("$ZodISODuration",(a,b)=>{b.pattern??(b.pattern=bt),b7.init(a,b)}),cn=aB("$ZodIPv4",(a,b)=>{b.pattern??(b.pattern=bx),b7.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.format="ipv4"})}),co=aB("$ZodIPv6",(a,b)=>{b.pattern??(b.pattern=by),b7.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.format="ipv6"}),a._zod.check=c=>{try{new URL(`http://[${c.value}]`)}catch{c.issues.push({code:"invalid_format",format:"ipv6",input:c.value,inst:a,continue:!b.abort})}}}),cp=aB("$ZodCIDRv4",(a,b)=>{b.pattern??(b.pattern=bz),b7.init(a,b)}),cq=aB("$ZodCIDRv6",(a,b)=>{b.pattern??(b.pattern=bA),b7.init(a,b),a._zod.check=c=>{let[d,e]=c.value.split("/");try{if(!e)throw Error();let a=Number(e);if(`${a}`!==e||a<0||a>128)throw Error();new URL(`http://[${d}]`)}catch{c.issues.push({code:"invalid_format",format:"cidrv6",input:c.value,inst:a,continue:!b.abort})}}});function cr(a){if(""===a)return!0;if(a.length%4!=0)return!1;try{return atob(a),!0}catch{return!1}}let cs=aB("$ZodBase64",(a,b)=>{b.pattern??(b.pattern=bB),b7.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64"}),a._zod.check=c=>{cr(c.value)||c.issues.push({code:"invalid_format",format:"base64",input:c.value,inst:a,continue:!b.abort})}}),ct=aB("$ZodBase64URL",(a,b)=>{b.pattern??(b.pattern=bC),b7.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64url"}),a._zod.check=c=>{!function(a){if(!bC.test(a))return!1;let b=a.replace(/[-_]/g,a=>"-"===a?"+":"/");return cr(b.padEnd(4*Math.ceil(b.length/4),"="))}(c.value)&&c.issues.push({code:"invalid_format",format:"base64url",input:c.value,inst:a,continue:!b.abort})}}),cu=aB("$ZodE164",(a,b)=>{b.pattern??(b.pattern=bE),b7.init(a,b)}),cv=aB("$ZodJWT",(a,b)=>{b7.init(a,b),a._zod.check=c=>{!function(a,b=null){try{let c=a.split(".");if(3!==c.length)return!1;let[d]=c;if(!d)return!1;let e=JSON.parse(atob(d));if("typ"in e&&e?.typ!=="JWT"||!e.alg||b&&(!("alg"in e)||e.alg!==b))return!1;return!0}catch{return!1}}(c.value,b.alg)&&c.issues.push({code:"invalid_format",format:"jwt",input:c.value,inst:a,continue:!b.abort})}}),cw=aB("$ZodNumber",(a,b)=>{b5.init(a,b),a._zod.pattern=a._zod.bag.pattern??bJ,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=Number(c.value)}catch(a){}let e=c.value;if("number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e))return c;let f="number"==typeof e?Number.isNaN(e)?"NaN":Number.isFinite(e)?void 0:"Infinity":void 0;return c.issues.push({expected:"number",code:"invalid_type",input:e,inst:a,...f?{received:f}:{}}),c}}),cx=aB("$ZodNumber",(a,b)=>{bT.init(a,b),cw.init(a,b)}),cy=aB("$ZodBoolean",(a,b)=>{b5.init(a,b),a._zod.pattern=bK,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=!!c.value}catch(a){}let e=c.value;return"boolean"==typeof e||c.issues.push({expected:"boolean",code:"invalid_type",input:e,inst:a}),c}}),cz=aB("$ZodNull",(a,b)=>{b5.init(a,b),a._zod.pattern=bL,a._zod.values=new Set([null]),a._zod.parse=(b,c)=>{let d=b.value;return null===d||b.issues.push({expected:"null",code:"invalid_type",input:d,inst:a}),b}}),cA=aB("$ZodUnknown",(a,b)=>{b5.init(a,b),a._zod.parse=a=>a}),cB=aB("$ZodNever",(a,b)=>{b5.init(a,b),a._zod.parse=(b,c)=>(b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:a}),b)});function cC(a,b,c){a.issues.length&&b.issues.push(...av(c,a.issues)),b.value[c]=a.value}let cD=aB("$ZodArray",(a,b)=>{b5.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!Array.isArray(e))return c.issues.push({expected:"array",code:"invalid_type",input:e,inst:a}),c;c.value=Array(e.length);let f=[];for(let a=0;a<e.length;a++){let g=e[a],h=b.element._zod.run({value:g,issues:[]},d);h instanceof Promise?f.push(h.then(b=>cC(b,c,a))):cC(h,c,a)}return f.length?Promise.all(f).then(()=>c):c}});function cE(a,b,c,d){a.issues.length&&b.issues.push(...av(c,a.issues)),void 0===a.value?c in d&&(b.value[c]=void 0):b.value[c]=a.value}let cF=aB("$ZodObject",(a,b)=>{let c,d;b5.init(a,b);let e=af(()=>{let a=Object.keys(b.shape);for(let c of a)if(!(b.shape[c]instanceof b5))throw Error(`Invalid element at key "${c}": expected a Zod schema`);let c=function(a){return Object.keys(a).filter(b=>"optional"===a[b]._zod.optin&&"optional"===a[b]._zod.optout)}(b.shape);return{shape:b.shape,keys:a,keySet:new Set(a),numKeys:a.length,optionalKeys:new Set(c)}});ah(a._zod,"propValues",()=>{let a=b.shape,c={};for(let b in a){let d=a[b]._zod;if(d.values)for(let a of(c[b]??(c[b]=new Set),d.values))c[b].add(a)}return c});let f=!aD.jitless,g=f&&an.value,h=b.catchall;a._zod.parse=(i,j)=>{d??(d=e.value);let k=i.value;if(!am(k))return i.issues.push({expected:"object",code:"invalid_type",input:k,inst:a}),i;let l=[];if(f&&g&&j?.async===!1&&!0!==j.jitless)c||(c=(a=>{let b=new b3(["shape","payload","ctx"]),c=e.value,d=a=>{let b=ak(a);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};b.write("const input = payload.value;");let f=Object.create(null),g=0;for(let a of c.keys)f[a]=`key_${g++}`;for(let a of(b.write("const newResult = {}"),c.keys)){let c=f[a],e=ak(a);b.write(`const ${c} = ${d(a)};`),b.write(`
        if (${c}.issues.length) {
          payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${e}, ...iss.path] : [${e}]
          })));
        }
        
        if (${c}.value === undefined) {
          if (${e} in input) {
            newResult[${e}] = undefined;
          }
        } else {
          newResult[${e}] = ${c}.value;
        }
      `)}b.write("payload.value = newResult;"),b.write("return payload;");let h=b.compile();return(b,c)=>h(a,b,c)})(b.shape)),i=c(i,j);else{i.value={};let a=d.shape;for(let b of d.keys){let c=a[b]._zod.run({value:k[b],issues:[]},j);c instanceof Promise?l.push(c.then(a=>cE(a,i,b,k))):cE(c,i,b,k)}}if(!h)return l.length?Promise.all(l).then(()=>i):i;let m=[],n=d.keySet,o=h._zod,p=o.def.type;for(let a of Object.keys(k)){if(n.has(a))continue;if("never"===p){m.push(a);continue}let b=o.run({value:k[a],issues:[]},j);b instanceof Promise?l.push(b.then(b=>cE(b,i,a,k))):cE(b,i,a,k)}return(m.length&&i.issues.push({code:"unrecognized_keys",keys:m,input:k,inst:a}),l.length)?Promise.all(l).then(()=>i):i}});function cG(a,b,c,d){for(let c of a)if(0===c.issues.length)return b.value=c.value,b;let e=a.filter(a=>!au(a));return 1===e.length?(b.value=e[0].value,e[0]):(b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>ax(a,d,aE())))}),b)}let cH=aB("$ZodUnion",(a,b)=>{b5.init(a,b),ah(a._zod,"optin",()=>b.options.some(a=>"optional"===a._zod.optin)?"optional":void 0),ah(a._zod,"optout",()=>b.options.some(a=>"optional"===a._zod.optout)?"optional":void 0),ah(a._zod,"values",()=>{if(b.options.every(a=>a._zod.values))return new Set(b.options.flatMap(a=>Array.from(a._zod.values)))}),ah(a._zod,"pattern",()=>{if(b.options.every(a=>a._zod.pattern)){let a=b.options.map(a=>a._zod.pattern);return RegExp(`^(${a.map(a=>ag(a.source)).join("|")})$`)}}),a._zod.parse=(c,d)=>{let e=!1,f=[];for(let a of b.options){let b=a._zod.run({value:c.value,issues:[]},d);if(b instanceof Promise)f.push(b),e=!0;else{if(0===b.issues.length)return b;f.push(b)}}return e?Promise.all(f).then(b=>cG(b,c,a,d)):cG(f,c,a,d)}}),cI=aB("$ZodDiscriminatedUnion",(a,b)=>{cH.init(a,b);let c=a._zod.parse;ah(a._zod,"propValues",()=>{let a={};for(let c of b.options){let d=c._zod.propValues;if(!d||0===Object.keys(d).length)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(c)}"`);for(let[b,c]of Object.entries(d))for(let d of(a[b]||(a[b]=new Set),c))a[b].add(d)}return a});let d=af(()=>{let a=b.options,c=new Map;for(let d of a){let a=d._zod.propValues?.[b.discriminator];if(!a||0===a.size)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(d)}"`);for(let b of a){if(c.has(b))throw Error(`Duplicate discriminator value "${String(b)}"`);c.set(b,d)}}return c});a._zod.parse=(e,f)=>{let g=e.value;if(!am(g))return e.issues.push({code:"invalid_type",expected:"object",input:g,inst:a}),e;let h=d.value.get(g?.[b.discriminator]);return h?h._zod.run(e,f):b.unionFallback?c(e,f):(e.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:b.discriminator,input:g,path:[b.discriminator],inst:a}),e)}}),cJ=aB("$ZodIntersection",(a,b)=>{b5.init(a,b),a._zod.parse=(a,c)=>{let d=a.value,e=b.left._zod.run({value:d,issues:[]},c),f=b.right._zod.run({value:d,issues:[]},c);return e instanceof Promise||f instanceof Promise?Promise.all([e,f]).then(([b,c])=>cK(a,b,c)):cK(a,e,f)}});function cK(a,b,c){if(b.issues.length&&a.issues.push(...b.issues),c.issues.length&&a.issues.push(...c.issues),au(a))return a;let d=function a(b,c){if(b===c||b instanceof Date&&c instanceof Date&&+b==+c)return{valid:!0,data:b};if(ao(b)&&ao(c)){let d=Object.keys(c),e=Object.keys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1,mergeErrorPath:[d,...e.mergeErrorPath]};f[d]=e.data}return{valid:!0,data:f}}if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return{valid:!1,mergeErrorPath:[]};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1,mergeErrorPath:[e,...f.mergeErrorPath]};d.push(f.data)}return{valid:!0,data:d}}return{valid:!1,mergeErrorPath:[]}}(b.value,c.value);if(!d.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(d.mergeErrorPath)}`);return a.value=d.data,a}let cL=aB("$ZodRecord",(a,b)=>{b5.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!ao(e))return c.issues.push({expected:"record",code:"invalid_type",input:e,inst:a}),c;let f=[];if(b.keyType._zod.values){let g,h=b.keyType._zod.values;for(let a of(c.value={},h))if("string"==typeof a||"number"==typeof a||"symbol"==typeof a){let g=b.valueType._zod.run({value:e[a],issues:[]},d);g instanceof Promise?f.push(g.then(b=>{b.issues.length&&c.issues.push(...av(a,b.issues)),c.value[a]=b.value})):(g.issues.length&&c.issues.push(...av(a,g.issues)),c.value[a]=g.value)}for(let a in e)h.has(a)||(g=g??[]).push(a);g&&g.length>0&&c.issues.push({code:"unrecognized_keys",input:e,inst:a,keys:g})}else for(let g of(c.value={},Reflect.ownKeys(e))){if("__proto__"===g)continue;let h=b.keyType._zod.run({value:g,issues:[]},d);if(h instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(h.issues.length){c.issues.push({origin:"record",code:"invalid_key",issues:h.issues.map(a=>ax(a,d,aE())),input:g,path:[g],inst:a}),c.value[h.value]=h.value;continue}let i=b.valueType._zod.run({value:e[g],issues:[]},d);i instanceof Promise?f.push(i.then(a=>{a.issues.length&&c.issues.push(...av(g,a.issues)),c.value[h.value]=a.value})):(i.issues.length&&c.issues.push(...av(g,i.issues)),c.value[h.value]=i.value)}return f.length?Promise.all(f).then(()=>c):c}}),cM=aB("$ZodEnum",(a,b)=>{b5.init(a,b);let c=ad(b.entries),d=new Set(c);a._zod.values=d,a._zod.pattern=RegExp(`^(${c.filter(a=>ap.has(typeof a)).map(a=>"string"==typeof a?aq(a):a.toString()).join("|")})$`),a._zod.parse=(b,e)=>{let f=b.value;return d.has(f)||b.issues.push({code:"invalid_value",values:c,input:f,inst:a}),b}}),cN=aB("$ZodLiteral",(a,b)=>{if(b5.init(a,b),0===b.values.length)throw Error("Cannot create literal schema with no valid values");a._zod.values=new Set(b.values),a._zod.pattern=RegExp(`^(${b.values.map(a=>"string"==typeof a?aq(a):a?aq(a.toString()):String(a)).join("|")})$`),a._zod.parse=(c,d)=>{let e=c.value;return a._zod.values.has(e)||c.issues.push({code:"invalid_value",values:b.values,input:e,inst:a}),c}}),cO=aB("$ZodTransform",(a,b)=>{b5.init(a,b),a._zod.parse=(a,c)=>{let d=b.transform(a.value,a);if(c.async)return(d instanceof Promise?d:Promise.resolve(d)).then(b=>(a.value=b,a));if(d instanceof Promise)throw new aC;return a.value=d,a}}),cP=aB("$ZodOptional",(a,b)=>{b5.init(a,b),a._zod.optin="optional",a._zod.optout="optional",ah(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,void 0]):void 0),ah(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${ag(a.source)})?$`):void 0}),a._zod.parse=(a,c)=>"optional"===b.innerType._zod.optin?b.innerType._zod.run(a,c):void 0===a.value?a:b.innerType._zod.run(a,c)}),cQ=aB("$ZodNullable",(a,b)=>{b5.init(a,b),ah(a._zod,"optin",()=>b.innerType._zod.optin),ah(a._zod,"optout",()=>b.innerType._zod.optout),ah(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${ag(a.source)}|null)$`):void 0}),ah(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,null]):void 0),a._zod.parse=(a,c)=>null===a.value?a:b.innerType._zod.run(a,c)}),cR=aB("$ZodDefault",(a,b)=>{b5.init(a,b),a._zod.optin="optional",ah(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if(void 0===a.value)return a.value=b.defaultValue,a;let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(a=>cS(a,b)):cS(d,b)}});function cS(a,b){return void 0===a.value&&(a.value=b.defaultValue),a}let cT=aB("$ZodPrefault",(a,b)=>{b5.init(a,b),a._zod.optin="optional",ah(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>(void 0===a.value&&(a.value=b.defaultValue),b.innerType._zod.run(a,c))}),cU=aB("$ZodNonOptional",(a,b)=>{b5.init(a,b),ah(a._zod,"values",()=>{let a=b.innerType._zod.values;return a?new Set([...a].filter(a=>void 0!==a)):void 0}),a._zod.parse=(c,d)=>{let e=b.innerType._zod.run(c,d);return e instanceof Promise?e.then(b=>cV(b,a)):cV(e,a)}});function cV(a,b){return a.issues.length||void 0!==a.value||a.issues.push({code:"invalid_type",expected:"nonoptional",input:a.value,inst:b}),a}let cW=aB("$ZodCatch",(a,b)=>{b5.init(a,b),ah(a._zod,"optin",()=>b.innerType._zod.optin),ah(a._zod,"optout",()=>b.innerType._zod.optout),ah(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(d=>(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>ax(a,c,aE()))},input:a.value}),a.issues=[]),a)):(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>ax(a,c,aE()))},input:a.value}),a.issues=[]),a)}}),cX=aB("$ZodPipe",(a,b)=>{b5.init(a,b),ah(a._zod,"values",()=>b.in._zod.values),ah(a._zod,"optin",()=>b.in._zod.optin),ah(a._zod,"optout",()=>b.out._zod.optout),ah(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>cY(a,b,c)):cY(d,b,c)}});function cY(a,b,c){return a.issues.length?a:b.out._zod.run({value:a.value,issues:a.issues},c)}let cZ=aB("$ZodReadonly",(a,b)=>{b5.init(a,b),ah(a._zod,"propValues",()=>b.innerType._zod.propValues),ah(a._zod,"values",()=>b.innerType._zod.values),ah(a._zod,"optin",()=>b.innerType._zod.optin),ah(a._zod,"optout",()=>b.innerType._zod.optout),a._zod.parse=(a,c)=>{let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(c$):c$(d)}});function c$(a){return a.value=Object.freeze(a.value),a}let c_=aB("$ZodLazy",(a,b)=>{b5.init(a,b),ah(a._zod,"innerType",()=>b.getter()),ah(a._zod,"pattern",()=>a._zod.innerType._zod.pattern),ah(a._zod,"propValues",()=>a._zod.innerType._zod.propValues),ah(a._zod,"optin",()=>a._zod.innerType._zod.optin),ah(a._zod,"optout",()=>a._zod.innerType._zod.optout),a._zod.parse=(b,c)=>a._zod.innerType._zod.run(b,c)}),c0=aB("$ZodCustom",(a,b)=>{bO.init(a,b),b5.init(a,b),a._zod.parse=(a,b)=>a,a._zod.check=c=>{let d=c.value,e=b.fn(d);if(e instanceof Promise)return e.then(b=>c1(b,c,d,a));c1(e,c,d,a)}});function c1(a,b,c,d){if(!a){let a={code:"custom",input:c,inst:d,path:[...d._zod.def.path??[]],continue:!d._zod.def.abort};d._zod.def.params&&(a.params=d._zod.def.params),b.issues.push(az(a))}}function c2(a,b){return new a({type:"string",format:"guid",check:"string_format",abort:!1,...as(b)})}function c3(a,b){return new bQ({check:"less_than",...as(b),value:a,inclusive:!1})}function c4(a,b){return new bQ({check:"less_than",...as(b),value:a,inclusive:!0})}function c5(a,b){return new bR({check:"greater_than",...as(b),value:a,inclusive:!1})}function c6(a,b){return new bR({check:"greater_than",...as(b),value:a,inclusive:!0})}function c7(a,b){return new bS({check:"multiple_of",...as(b),value:a})}function c8(a,b){return new bU({check:"max_length",...as(b),maximum:a})}function c9(a,b){return new bV({check:"min_length",...as(b),minimum:a})}function da(a,b){return new bW({check:"length_equals",...as(b),length:a})}function db(a){return new b2({check:"overwrite",tx:a})}let dc=aB("ZodISODateTime",(a,b)=>{cj.init(a,b),dk.init(a,b)}),dd=aB("ZodISODate",(a,b)=>{ck.init(a,b),dk.init(a,b)}),de=aB("ZodISOTime",(a,b)=>{cl.init(a,b),dk.init(a,b)}),df=aB("ZodISODuration",(a,b)=>{cm.init(a,b),dk.init(a,b)}),dg=aB("ZodType",(a,b)=>(b5.init(a,b),a.def=b,Object.defineProperty(a,"_def",{value:b}),a.check=(...c)=>a.clone({...b,checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]}),a.clone=(b,c)=>ar(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a),a.parse=(b,c)=>aO(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>aQ(a,b,c),a.parseAsync=async(b,c)=>aP(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>aR(a,b,c),a.spa=a.safeParseAsync,a.refine=(b,c)=>a.check(function(a,b={}){return new ef({type:"custom",check:"custom",fn:a,...as(b)})}(b,c)),a.superRefine=b=>a.check(function(a){let b=function(a){let b=new bO({check:"custom"});return b._zod.check=a,b}(c=>(c.addIssue=a=>{"string"==typeof a?c.issues.push(az(a,c.value,b._zod.def)):(a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=c.value),a.inst??(a.inst=b),a.continue??(a.continue=!b._zod.def.abort),c.issues.push(az(a)))},a(c.value,c)));return b}(b)),a.overwrite=b=>a.check(db(b)),a.optional=()=>d4(a),a.nullable=()=>d6(a),a.nullish=()=>d4(d6(a)),a.nonoptional=b=>new d9({type:"nonoptional",innerType:a,...as(b)}),a.array=()=>dR(a),a.or=b=>dW([a,b]),a.and=b=>new dY({type:"intersection",left:a,right:b}),a.transform=b=>ec(a,new d2({type:"transform",transform:b})),a.default=b=>(function(a,b){return new d7({type:"default",innerType:a,get defaultValue(){return"function"==typeof b?b():b}})})(a,b),a.prefault=b=>(function(a,b){return new d8({type:"prefault",innerType:a,get defaultValue(){return"function"==typeof b?b():b}})})(a,b),a.catch=b=>(function(a,b){return new ea({type:"catch",innerType:a,catchValue:"function"==typeof b?b:()=>b})})(a,b),a.pipe=b=>ec(a,b),a.readonly=()=>new ed({type:"readonly",innerType:a}),a.describe=b=>{let c=a.clone();return ac.add(c,{description:b}),c},Object.defineProperty(a,"description",{get:()=>ac.get(a)?.description,configurable:!0}),a.meta=(...b)=>{if(0===b.length)return ac.get(a);let c=a.clone();return ac.add(c,b[0]),c},a.isOptional=()=>a.safeParse(void 0).success,a.isNullable=()=>a.safeParse(null).success,a)),dh=aB("_ZodString",(a,b)=>{b6.init(a,b),dg.init(a,b);let c=a._zod.bag;a.format=c.format??null,a.minLength=c.minimum??null,a.maxLength=c.maximum??null,a.regex=(...b)=>a.check(function(a,b){return new bY({check:"string_format",format:"regex",...as(b),pattern:a})}(...b)),a.includes=(...b)=>a.check(function(a,b){return new b_({check:"string_format",format:"includes",...as(b),includes:a})}(...b)),a.startsWith=(...b)=>a.check(function(a,b){return new b0({check:"string_format",format:"starts_with",...as(b),prefix:a})}(...b)),a.endsWith=(...b)=>a.check(function(a,b){return new b1({check:"string_format",format:"ends_with",...as(b),suffix:a})}(...b)),a.min=(...b)=>a.check(c9(...b)),a.max=(...b)=>a.check(c8(...b)),a.length=(...b)=>a.check(da(...b)),a.nonempty=(...b)=>a.check(c9(1,...b)),a.lowercase=b=>a.check(new bZ({check:"string_format",format:"lowercase",...as(b)})),a.uppercase=b=>a.check(new b$({check:"string_format",format:"uppercase",...as(b)})),a.trim=()=>a.check(db(a=>a.trim())),a.normalize=(...b)=>a.check(function(a){return db(b=>b.normalize(a))}(...b)),a.toLowerCase=()=>a.check(db(a=>a.toLowerCase())),a.toUpperCase=()=>a.check(db(a=>a.toUpperCase()))}),di=aB("ZodString",(a,b)=>{b6.init(a,b),dh.init(a,b),a.email=b=>a.check(new dl({type:"string",format:"email",check:"string_format",abort:!1,...as(b)})),a.url=b=>a.check(new dp({type:"string",format:"url",check:"string_format",abort:!1,...as(b)})),a.jwt=b=>a.check(new dE({type:"string",format:"jwt",check:"string_format",abort:!1,...as(b)})),a.emoji=b=>a.check(new dq({type:"string",format:"emoji",check:"string_format",abort:!1,...as(b)})),a.guid=b=>a.check(c2(dm,b)),a.uuid=b=>a.check(new dn({type:"string",format:"uuid",check:"string_format",abort:!1,...as(b)})),a.uuidv4=b=>a.check(new dn({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...as(b)})),a.uuidv6=b=>a.check(new dn({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...as(b)})),a.uuidv7=b=>a.check(new dn({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...as(b)})),a.nanoid=b=>a.check(new dr({type:"string",format:"nanoid",check:"string_format",abort:!1,...as(b)})),a.guid=b=>a.check(c2(dm,b)),a.cuid=b=>a.check(new ds({type:"string",format:"cuid",check:"string_format",abort:!1,...as(b)})),a.cuid2=b=>a.check(new dt({type:"string",format:"cuid2",check:"string_format",abort:!1,...as(b)})),a.ulid=b=>a.check(new du({type:"string",format:"ulid",check:"string_format",abort:!1,...as(b)})),a.base64=b=>a.check(new dB({type:"string",format:"base64",check:"string_format",abort:!1,...as(b)})),a.base64url=b=>a.check(new dC({type:"string",format:"base64url",check:"string_format",abort:!1,...as(b)})),a.xid=b=>a.check(new dv({type:"string",format:"xid",check:"string_format",abort:!1,...as(b)})),a.ksuid=b=>a.check(new dw({type:"string",format:"ksuid",check:"string_format",abort:!1,...as(b)})),a.ipv4=b=>a.check(new dx({type:"string",format:"ipv4",check:"string_format",abort:!1,...as(b)})),a.ipv6=b=>a.check(new dy({type:"string",format:"ipv6",check:"string_format",abort:!1,...as(b)})),a.cidrv4=b=>a.check(new dz({type:"string",format:"cidrv4",check:"string_format",abort:!1,...as(b)})),a.cidrv6=b=>a.check(new dA({type:"string",format:"cidrv6",check:"string_format",abort:!1,...as(b)})),a.e164=b=>a.check(new dD({type:"string",format:"e164",check:"string_format",abort:!1,...as(b)})),a.datetime=b=>a.check(new dc({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...as(b)})),a.date=b=>a.check(new dd({type:"string",format:"date",check:"string_format",...as(b)})),a.time=b=>a.check(new de({type:"string",format:"time",check:"string_format",precision:null,...as(b)})),a.duration=b=>a.check(new df({type:"string",format:"duration",check:"string_format",...as(b)}))});function dj(a){return new di({type:"string",...as(a)})}let dk=aB("ZodStringFormat",(a,b)=>{b7.init(a,b),dh.init(a,b)}),dl=aB("ZodEmail",(a,b)=>{ca.init(a,b),dk.init(a,b)}),dm=aB("ZodGUID",(a,b)=>{b8.init(a,b),dk.init(a,b)}),dn=aB("ZodUUID",(a,b)=>{b9.init(a,b),dk.init(a,b)}),dp=aB("ZodURL",(a,b)=>{cb.init(a,b),dk.init(a,b)}),dq=aB("ZodEmoji",(a,b)=>{cc.init(a,b),dk.init(a,b)}),dr=aB("ZodNanoID",(a,b)=>{cd.init(a,b),dk.init(a,b)}),ds=aB("ZodCUID",(a,b)=>{ce.init(a,b),dk.init(a,b)}),dt=aB("ZodCUID2",(a,b)=>{cf.init(a,b),dk.init(a,b)}),du=aB("ZodULID",(a,b)=>{cg.init(a,b),dk.init(a,b)}),dv=aB("ZodXID",(a,b)=>{ch.init(a,b),dk.init(a,b)}),dw=aB("ZodKSUID",(a,b)=>{ci.init(a,b),dk.init(a,b)}),dx=aB("ZodIPv4",(a,b)=>{cn.init(a,b),dk.init(a,b)}),dy=aB("ZodIPv6",(a,b)=>{co.init(a,b),dk.init(a,b)}),dz=aB("ZodCIDRv4",(a,b)=>{cp.init(a,b),dk.init(a,b)}),dA=aB("ZodCIDRv6",(a,b)=>{cq.init(a,b),dk.init(a,b)}),dB=aB("ZodBase64",(a,b)=>{cs.init(a,b),dk.init(a,b)}),dC=aB("ZodBase64URL",(a,b)=>{ct.init(a,b),dk.init(a,b)}),dD=aB("ZodE164",(a,b)=>{cu.init(a,b),dk.init(a,b)}),dE=aB("ZodJWT",(a,b)=>{cv.init(a,b),dk.init(a,b)}),dF=aB("ZodNumber",(a,b)=>{cw.init(a,b),dg.init(a,b),a.gt=(b,c)=>a.check(c5(b,c)),a.gte=(b,c)=>a.check(c6(b,c)),a.min=(b,c)=>a.check(c6(b,c)),a.lt=(b,c)=>a.check(c3(b,c)),a.lte=(b,c)=>a.check(c4(b,c)),a.max=(b,c)=>a.check(c4(b,c)),a.int=b=>a.check(dI(b)),a.safe=b=>a.check(dI(b)),a.positive=b=>a.check(c5(0,b)),a.nonnegative=b=>a.check(c6(0,b)),a.negative=b=>a.check(c3(0,b)),a.nonpositive=b=>a.check(c4(0,b)),a.multipleOf=(b,c)=>a.check(c7(b,c)),a.step=(b,c)=>a.check(c7(b,c)),a.finite=()=>a;let c=a._zod.bag;a.minValue=Math.max(c.minimum??-1/0,c.exclusiveMinimum??-1/0)??null,a.maxValue=Math.min(c.maximum??1/0,c.exclusiveMaximum??1/0)??null,a.isInt=(c.format??"").includes("int")||Number.isSafeInteger(c.multipleOf??.5),a.isFinite=!0,a.format=c.format??null});function dG(a){return new dF({type:"number",checks:[],...as(a)})}let dH=aB("ZodNumberFormat",(a,b)=>{cx.init(a,b),dF.init(a,b)});function dI(a){return new dH({type:"number",check:"number_format",abort:!1,format:"safeint",...as(a)})}let dJ=aB("ZodBoolean",(a,b)=>{cy.init(a,b),dg.init(a,b)});function dK(a){return new dJ({type:"boolean",...as(a)})}let dL=aB("ZodNull",(a,b)=>{cz.init(a,b),dg.init(a,b)}),dM=aB("ZodUnknown",(a,b)=>{cA.init(a,b),dg.init(a,b)});function dN(){return new dM({type:"unknown"})}let dO=aB("ZodNever",(a,b)=>{cB.init(a,b),dg.init(a,b)});function dP(a){return new dO({type:"never",...as(a)})}let dQ=aB("ZodArray",(a,b)=>{cD.init(a,b),dg.init(a,b),a.element=b.element,a.min=(b,c)=>a.check(c9(b,c)),a.nonempty=b=>a.check(c9(1,b)),a.max=(b,c)=>a.check(c8(b,c)),a.length=(b,c)=>a.check(da(b,c)),a.unwrap=()=>a.element});function dR(a,b){return new dQ({type:"array",element:a,...as(b)})}let dS=aB("ZodObject",(a,b)=>{cF.init(a,b),dg.init(a,b),ah(a,"shape",()=>b.shape),a.keyof=()=>(function(a,b){return new d_({type:"enum",entries:Array.isArray(a)?Object.fromEntries(a.map(a=>[a,a])):a,...as(void 0)})})(Object.keys(a._zod.def.shape)),a.catchall=b=>a.clone({...a._zod.def,catchall:b}),a.passthrough=()=>a.clone({...a._zod.def,catchall:dN()}),a.loose=()=>a.clone({...a._zod.def,catchall:dN()}),a.strict=()=>a.clone({...a._zod.def,catchall:dP()}),a.strip=()=>a.clone({...a._zod.def,catchall:void 0}),a.extend=b=>(function(a,b){if(!ao(b))throw Error("Invalid input to extend: expected a plain object");let c=aj(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b};return ai(this,"shape",c),c},checks:[]});return ar(a,c)})(a,b),a.merge=b=>(function(a,b){let c=aj(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b._zod.def.shape};return ai(this,"shape",c),c},get catchall(){return b._zod.def.catchall},checks:[]});return ar(a,c)})(a,b),a.pick=b=>(function(a,b){let c=a._zod.def,d=aj(a._zod.def,{get shape(){let a={};for(let d in b){if(!(d in c.shape))throw Error(`Unrecognized key: "${d}"`);b[d]&&(a[d]=c.shape[d])}return ai(this,"shape",a),a},checks:[]});return ar(a,d)})(a,b),a.omit=b=>(function(a,b){let c=a._zod.def,d=aj(a._zod.def,{get shape(){let d={...a._zod.def.shape};for(let a in b){if(!(a in c.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&delete d[a]}return ai(this,"shape",d),d},checks:[]});return ar(a,d)})(a,b),a.partial=(...b)=>(function(a,b,c){let d=aj(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in d))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=a?new a({type:"optional",innerType:d[b]}):d[b])}else for(let b in d)e[b]=a?new a({type:"optional",innerType:d[b]}):d[b];return ai(this,"shape",e),e},checks:[]});return ar(b,d)})(d3,a,b[0]),a.required=(...b)=>(function(a,b,c){let d=aj(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in e))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=new a({type:"nonoptional",innerType:d[b]}))}else for(let b in d)e[b]=new a({type:"nonoptional",innerType:d[b]});return ai(this,"shape",e),e},checks:[]});return ar(b,d)})(d9,a,b[0])});function dT(a,b){return new dS({type:"object",get shape(){return ai(this,"shape",{...a}),this.shape},...as(b)})}function dU(a,b){return new dS({type:"object",get shape(){return ai(this,"shape",{...a}),this.shape},catchall:dP(),...as(b)})}let dV=aB("ZodUnion",(a,b)=>{cH.init(a,b),dg.init(a,b),a.options=b.options});function dW(a,b){return new dV({type:"union",options:a,...as(b)})}let dX=aB("ZodDiscriminatedUnion",(a,b)=>{dV.init(a,b),cI.init(a,b)}),dY=aB("ZodIntersection",(a,b)=>{cJ.init(a,b),dg.init(a,b)}),dZ=aB("ZodRecord",(a,b)=>{cL.init(a,b),dg.init(a,b),a.keyType=b.keyType,a.valueType=b.valueType});function d$(a,b,c){return new dZ({type:"record",keyType:a,valueType:b,...as(c)})}let d_=aB("ZodEnum",(a,b)=>{cM.init(a,b),dg.init(a,b),a.enum=b.entries,a.options=Object.values(b.entries);let c=new Set(Object.keys(b.entries));a.extract=(a,d)=>{let e={};for(let d of a)if(c.has(d))e[d]=b.entries[d];else throw Error(`Key ${d} not found in enum`);return new d_({...b,checks:[],...as(d),entries:e})},a.exclude=(a,d)=>{let e={...b.entries};for(let b of a)if(c.has(b))delete e[b];else throw Error(`Key ${b} not found in enum`);return new d_({...b,checks:[],...as(d),entries:e})}}),d0=aB("ZodLiteral",(a,b)=>{cN.init(a,b),dg.init(a,b),a.values=new Set(b.values),Object.defineProperty(a,"value",{get(){if(b.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return b.values[0]}})});function d1(a,b){return new d0({type:"literal",values:Array.isArray(a)?a:[a],...as(b)})}let d2=aB("ZodTransform",(a,b)=>{cO.init(a,b),dg.init(a,b),a._zod.parse=(c,d)=>{c.addIssue=d=>{"string"==typeof d?c.issues.push(az(d,c.value,b)):(d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=c.value),d.inst??(d.inst=a),c.issues.push(az(d)))};let e=b.transform(c.value,c);return e instanceof Promise?e.then(a=>(c.value=a,c)):(c.value=e,c)}}),d3=aB("ZodOptional",(a,b)=>{cP.init(a,b),dg.init(a,b),a.unwrap=()=>a._zod.def.innerType});function d4(a){return new d3({type:"optional",innerType:a})}let d5=aB("ZodNullable",(a,b)=>{cQ.init(a,b),dg.init(a,b),a.unwrap=()=>a._zod.def.innerType});function d6(a){return new d5({type:"nullable",innerType:a})}let d7=aB("ZodDefault",(a,b)=>{cR.init(a,b),dg.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeDefault=a.unwrap}),d8=aB("ZodPrefault",(a,b)=>{cT.init(a,b),dg.init(a,b),a.unwrap=()=>a._zod.def.innerType}),d9=aB("ZodNonOptional",(a,b)=>{cU.init(a,b),dg.init(a,b),a.unwrap=()=>a._zod.def.innerType}),ea=aB("ZodCatch",(a,b)=>{cW.init(a,b),dg.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeCatch=a.unwrap}),eb=aB("ZodPipe",(a,b)=>{cX.init(a,b),dg.init(a,b),a.in=b.in,a.out=b.out});function ec(a,b){return new eb({type:"pipe",in:a,out:b})}let ed=aB("ZodReadonly",(a,b)=>{cZ.init(a,b),dg.init(a,b),a.unwrap=()=>a._zod.def.innerType}),ee=aB("ZodLazy",(a,b)=>{c_.init(a,b),dg.init(a,b),a.unwrap=()=>a._zod.def.getter()}),ef=aB("ZodCustom",(a,b)=>{c0.init(a,b),dg.init(a,b)});function eg(a,b={error:`Input not instance of ${a.name}`}){let c=new ef({type:"custom",check:"custom",fn:b=>b instanceof a,abort:!0,...as(b)});return c._zod.bag.Class=a,c}var eh=Object.defineProperty,ei=(Symbol.for("vercel.ai.error.AI_NoOutputSpecifiedError"),Symbol.for("vercel.ai.error.AI_InvalidArgumentError"),Symbol.for("vercel.ai.error.AI_RetryError"),Symbol.for("vercel.ai.error.AI_DownloadError"),Symbol.for("vercel.ai.error.AI_InvalidDataContentError"),dW([dj(),eg(Uint8Array),eg(ArrayBuffer),function(a,b){let c=as(b);return c.abort??(c.abort=!0),new ef({type:"custom",check:"custom",fn:a??(()=>!0),...c})}(a=>{var b,c;return null!=(c=null==(b=globalThis.Buffer)?void 0:b.isBuffer(a))&&c},{message:"Must be a Buffer"})])),ej=(Symbol.for("vercel.ai.error.AI_InvalidMessageRoleError"),Symbol.for("vercel.ai.error.AI_InvalidStreamPartError"),Symbol.for("vercel.ai.error.AI_InvalidToolInputError"),Symbol.for("vercel.ai.error.AI_MCPClientError"),Symbol.for("vercel.ai.error.AI_NoImageGeneratedError"),"AI_NoObjectGeneratedError"),ek=`vercel.ai.error.${ej}`,el=Symbol.for(ek),em=class extends M{constructor({message:a="No object generated.",cause:b,text:c,response:d,usage:e,finishReason:f}){super({name:ej,message:a,cause:b}),this[j]=!0,this.text=c,this.response=d,this.usage=e,this.finishReason=f}static isInstance(a){return M.hasMarker(a,ek)}};j=el,Symbol.for("vercel.ai.error.AI_NoSuchToolError"),Symbol.for("vercel.ai.error.AI_ToolCallRepairError"),Symbol.for("vercel.ai.error.AI_MessageConversionError");var en=new ee({type:"lazy",getter:()=>dW([new dL({type:"null",...as(void 0)}),dj(),dG(),dK(),d$(dj(),en),dR(en)])}),eo=d$(dj(),d$(dj(),en)),ep=dT({type:d1("text"),text:dj(),providerOptions:eo.optional()}),eq=dT({type:d1("image"),image:dW([ei,eg(URL)]),mediaType:dj().optional(),providerOptions:eo.optional()}),er=dT({type:d1("file"),data:dW([ei,eg(URL)]),filename:dj().optional(),mediaType:dj(),providerOptions:eo.optional()}),es=dT({type:d1("reasoning"),text:dj(),providerOptions:eo.optional()}),et=dT({type:d1("tool-call"),toolCallId:dj(),toolName:dj(),input:dN(),providerOptions:eo.optional(),providerExecuted:dK().optional()}),eu=new dX({type:"union",options:[dT({type:d1("text"),value:dj()}),dT({type:d1("json"),value:en}),dT({type:d1("error-text"),value:dj()}),dT({type:d1("error-json"),value:en}),dT({type:d1("content"),value:dR(dW([dT({type:d1("text"),text:dj()}),dT({type:d1("media"),data:dj(),mediaType:dj()})]))})],discriminator:"type",...as(void 0)}),ev=dT({type:d1("tool-result"),toolCallId:dj(),toolName:dj(),output:eu,providerOptions:eo.optional()}),ew=dT({role:d1("system"),content:dj(),providerOptions:eo.optional()}),ex=dT({role:d1("user"),content:dW([dj(),dR(dW([ep,eq,er]))]),providerOptions:eo.optional()}),ey=dT({role:d1("assistant"),content:dW([dj(),dR(dW([ep,er,es,et,ev]))]),providerOptions:eo.optional()});dW([ew,ex,ey,dT({role:d1("tool"),content:dR(ev),providerOptions:eo.optional()})]),ba({prefix:"aitxt",size:24}),TransformStream;var ez=dW([dU({type:d1("text-start"),id:dj(),providerMetadata:eo.optional()}),dU({type:d1("text-delta"),id:dj(),delta:dj(),providerMetadata:eo.optional()}),dU({type:d1("text-end"),id:dj(),providerMetadata:eo.optional()}),dU({type:d1("error"),errorText:dj()}),dU({type:d1("tool-input-start"),toolCallId:dj(),toolName:dj(),providerExecuted:dK().optional()}),dU({type:d1("tool-input-delta"),toolCallId:dj(),inputTextDelta:dj()}),dU({type:d1("tool-input-available"),toolCallId:dj(),toolName:dj(),input:dN(),providerExecuted:dK().optional(),providerMetadata:eo.optional()}),dU({type:d1("tool-output-available"),toolCallId:dj(),output:dN(),providerExecuted:dK().optional()}),dU({type:d1("tool-output-error"),toolCallId:dj(),errorText:dj(),providerExecuted:dK().optional()}),dU({type:d1("reasoning"),text:dj(),providerMetadata:eo.optional()}),dU({type:d1("reasoning-start"),id:dj(),providerMetadata:eo.optional()}),dU({type:d1("reasoning-delta"),id:dj(),delta:dj(),providerMetadata:eo.optional()}),dU({type:d1("reasoning-end"),id:dj(),providerMetadata:eo.optional()}),dU({type:d1("reasoning-part-finish")}),dU({type:d1("source-url"),sourceId:dj(),url:dj(),title:dj().optional(),providerMetadata:eo.optional()}),dU({type:d1("source-document"),sourceId:dj(),mediaType:dj(),title:dj(),filename:dj().optional(),providerMetadata:eo.optional()}),dU({type:d1("file"),url:dj(),mediaType:dj(),providerMetadata:eo.optional()}),dU({type:dj().startsWith("data-"),id:dj().optional(),data:dN(),transient:dK().optional()}),dU({type:d1("start-step")}),dU({type:d1("finish-step")}),dU({type:d1("start"),messageId:dj().optional(),messageMetadata:dN().optional()}),dU({type:d1("finish"),messageMetadata:dN().optional()}),dU({type:d1("abort")}),dU({type:d1("message-metadata"),messageMetadata:dN()})]);async function eA(a){if(void 0===a)return{value:void 0,state:"undefined-input"};let b=await bh({text:a});return b.success?{value:b.value,state:"successful-parse"}:(b=await bh({text:function(a){let b=["ROOT"],c=-1,d=null;function e(a,e,f){switch(a){case'"':c=e,b.pop(),b.push(f),b.push("INSIDE_STRING");break;case"f":case"t":case"n":c=e,d=e,b.pop(),b.push(f),b.push("INSIDE_LITERAL");break;case"-":b.pop(),b.push(f),b.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=e,b.pop(),b.push(f),b.push("INSIDE_NUMBER");break;case"{":c=e,b.pop(),b.push(f),b.push("INSIDE_OBJECT_START");break;case"[":c=e,b.pop(),b.push(f),b.push("INSIDE_ARRAY_START")}}function f(a,d){switch(a){case",":b.pop(),b.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":c=d,b.pop()}}function g(a,d){switch(a){case",":b.pop(),b.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":c=d,b.pop()}}for(let h=0;h<a.length;h++){let i=a[h];switch(b[b.length-1]){case"ROOT":e(i,h,"FINISH");break;case"INSIDE_OBJECT_START":switch(i){case'"':b.pop(),b.push("INSIDE_OBJECT_KEY");break;case"}":c=h,b.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===i&&(b.pop(),b.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===i&&(b.pop(),b.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===i&&(b.pop(),b.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":e(i,h,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":f(i,h);break;case"INSIDE_STRING":switch(i){case'"':b.pop(),c=h;break;case"\\":b.push("INSIDE_STRING_ESCAPE");break;default:c=h}break;case"INSIDE_ARRAY_START":"]"===i?(c=h,b.pop()):(c=h,e(i,h,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(i){case",":b.pop(),b.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":c=h,b.pop();break;default:c=h}break;case"INSIDE_ARRAY_AFTER_COMMA":e(i,h,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":b.pop(),c=h;break;case"INSIDE_NUMBER":switch(i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=h;break;case"e":case"E":case"-":case".":break;case",":b.pop(),"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]&&f(i,h);break;case"}":b.pop(),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]&&f(i,h);break;case"]":b.pop(),"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h);break;default:b.pop()}break;case"INSIDE_LITERAL":{let e=a.substring(d,h+1);"false".startsWith(e)||"true".startsWith(e)||"null".startsWith(e)?c=h:(b.pop(),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]?f(i,h):"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h))}}}let h=a.slice(0,c+1);for(let c=b.length-1;c>=0;c--)switch(b[c]){case"INSIDE_STRING":h+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":h+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":h+="]";break;case"INSIDE_LITERAL":{let b=a.substring(d,a.length);"true".startsWith(b)?h+="true".slice(b.length):"false".startsWith(b)?h+="false".slice(b.length):"null".startsWith(b)&&(h+="null".slice(b.length))}}return h}(a)})).success?{value:b.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}function eB(a){return a.type.startsWith("tool-")}function eC(a){return a.type.split("-").slice(1).join("-")}async function eD({stream:a,onError:b}){let c=a.getReader();try{for(;;){let{done:a}=await c.read();if(a)break}}catch(a){null==b||b(a)}finally{c.releaseLock()}}ba({prefix:"aitxt",size:24}),ba({prefix:"aiobj",size:24});var eE=class{constructor(){this.queue=[],this.isProcessing=!1}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(a){return new Promise((b,c)=>{this.queue.push(async()=>{try{await a(),b()}catch(a){c(a)}}),this.processQueue()})}};ba({prefix:"aiobj",size:24}),((a,b)=>{for(var c in b)eh(a,c,{get:b[c],enumerable:!0})})({},{object:()=>eG,text:()=>eF});var eF=()=>({type:"text",responseFormat:{type:"text"},parsePartial:async({text:a})=>({partial:a}),parseOutput:async({text:a})=>a}),eG=({schema:a})=>{let b=function(a){return null==a?bk({properties:{},additionalProperties:!1}):"object"==typeof a&&null!==a&&bj in a&&!0===a[bj]&&"jsonSchema"in a&&"validate"in a?a:function(a,b){var c;return"_zod"in a?bk(function(a,b){if(a instanceof ab){let c=new aA(b),d={};for(let b of a._idmap.entries()){let[a,d]=b;c.process(d)}let e={},f={registry:a,uri:b?.uri,defs:d};for(let d of a._idmap.entries()){let[a,g]=d;e[a]=c.emit(g,{...b,external:f})}return Object.keys(d).length>0&&(e.__shared={["draft-2020-12"===c.target?"$defs":"definitions"]:d}),{schemas:e}}let c=new aA(b);return c.process(a),c.emit(a,b)}(a,{target:"draft-7",io:"output",reused:"inline"}),{validate:async b=>{let c=await aR(a,b);return c.success?{success:!0,value:c.data}:{success:!1,error:c.error}}}):bk(((a,b)=>{let c=(a=>{let b,c="string"==typeof(b=a)?{...aT,name:b}:{...aT,...b},d=void 0!==c.name?[...c.basePath,c.definitionPath,c.name]:c.basePath;return{...c,flags:{hasReferencedOpenAiAnyType:!1},currentPath:d,propertyPath:void 0,seen:new Map(Object.entries(c.definitions).map(([a,b])=>[b._def,{def:b._def,path:[...c.basePath,c.definitionPath,a],jsonSchema:void 0}]))}})(b),d="object"==typeof b&&b.definitions?Object.entries(b.definitions).reduce((a,[b,d])=>({...a,[b]:a7(d._def,{...c,currentPath:[...c.basePath,c.definitionPath,b]},!0)??aV(c)}),{}):void 0,e="string"==typeof b?b:b?.nameStrategy==="title"?void 0:b?.name,f=a7(a._def,void 0===e?c:{...c,currentPath:[...c.basePath,c.definitionPath,e]},!1)??aV(c),g="object"==typeof b&&void 0!==b.name&&"title"===b.nameStrategy?b.name:void 0;void 0!==g&&(f.title=g),c.flags.hasReferencedOpenAiAnyType&&(d||(d={}),d[c.openAiAnyTypeName]||(d[c.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===c.$refStrategy?"1":[...c.basePath,c.definitionPath,c.openAiAnyTypeName].join("/")}}));let h=void 0===e?d?{...f,[c.definitionPath]:d}:f:{$ref:[..."relative"===c.$refStrategy?[]:c.basePath,c.definitionPath,e].join("/"),[c.definitionPath]:{...d,[e]:f}};return"jsonSchema7"===c.target?h.$schema="http://json-schema.org/draft-07/schema#":("jsonSchema2019-09"===c.target||"openAi"===c.target)&&(h.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===c.target&&("anyOf"in h||"oneOf"in h||"allOf"in h||"type"in h&&Array.isArray(h.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),h})(a,{$refStrategy:(c=void 0,"none"),target:"jsonSchema7"}),{validate:async b=>{let c=await a.safeParseAsync(b);return c.success?{success:!0,value:c.data}:{success:!1,error:c.error}}})}(a)}(a);return{type:"object",responseFormat:{type:"json",schema:b.jsonSchema},async parsePartial({text:a}){let b=await eA(a);switch(b.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:b.value};default:{let a=b.state;throw Error(`Unsupported parse state: ${a}`)}}},async parseOutput({text:a},c){let d=await bh({text:a});if(!d.success)throw new em({message:"No object generated: could not parse the response.",cause:d.error,text:a,response:c.response,usage:c.usage,finishReason:c.finishReason});let e=await bg({value:d.value,schema:b});if(!e.success)throw new em({message:"No object generated: response did not match schema.",cause:e.error,text:a,response:c.response,usage:c.usage,finishReason:c.finishReason});return e.value}}},eH=(Symbol.for("vercel.ai.error.AI_NoSuchProviderError"),dT({name:dj(),version:dj()}).passthrough()),eI=dT({_meta:d4(dT({}).passthrough())}).passthrough(),eJ=dT({method:dj(),params:d4(eI)}),eK=dT({experimental:d4(dT({}).passthrough()),logging:d4(dT({}).passthrough()),prompts:d4(dT({listChanged:d4(dK())}).passthrough()),resources:d4(dT({subscribe:d4(dK()),listChanged:d4(dK())}).passthrough()),tools:d4(dT({listChanged:d4(dK())}).passthrough())}).passthrough();eI.extend({protocolVersion:dj(),capabilities:eK,serverInfo:eH,instructions:d4(dj())});var eL=eI.extend({nextCursor:d4(dj())}),eM=dT({name:dj(),description:d4(dj()),inputSchema:dT({type:d1("object"),properties:d4(dT({}).passthrough())}).passthrough()}).passthrough();eL.extend({tools:dR(eM)});var eN=dT({type:d1("text"),text:dj()}).passthrough(),eO=dT({type:d1("image"),data:dj().base64(),mimeType:dj()}).passthrough(),eP=dT({uri:dj(),mimeType:d4(dj())}).passthrough(),eQ=eP.extend({text:dj()}),eR=eP.extend({blob:dj().base64()}),eS=dT({type:d1("resource"),resource:dW([eQ,eR])}).passthrough();eI.extend({content:dR(dW([eN,eO,eS])),isError:dK().default(!1).optional()}).or(eI.extend({toolResult:dN()}));var eT=dT({jsonrpc:d1("2.0"),id:dW([dj(),dG().int()])}).merge(eJ).strict(),eU=dT({jsonrpc:d1("2.0"),id:dW([dj(),dG().int()]),result:eI}).strict(),eV=dT({jsonrpc:d1("2.0"),id:dW([dj(),dG().int()]),error:dT({code:dG().int(),message:dj(),data:d4(dN())})}).strict();async function eW(a){if(null==a)return[];if(!globalThis.FileList||!(a instanceof globalThis.FileList))throw Error("FileList is not supported in the current environment");return Promise.all(Array.from(a).map(async a=>{let{name:b,type:c}=a;return{type:"file",mediaType:c,filename:b,url:await new Promise((b,c)=>{let d=new FileReader;d.onload=a=>{var c;b(null==(c=a.target)?void 0:c.result)},d.onerror=a=>c(a),d.readAsDataURL(a)})}}))}dW([eT,dT({jsonrpc:d1("2.0")}).merge(dT({method:dj(),params:d4(eI)})).strict(),eU,eV]);var eX=class{constructor({api:a="/api/chat",credentials:b,headers:c,body:d,fetch:e,prepareSendMessagesRequest:f,prepareReconnectToStreamRequest:g}){this.api=a,this.credentials=b,this.headers=c,this.body=d,this.fetch=e,this.prepareSendMessagesRequest=f,this.prepareReconnectToStreamRequest=g}async sendMessages({abortSignal:a,...b}){var c,d,e,f,g;let h=await bi(this.body),i=await bi(this.headers),j=await bi(this.credentials),k=await (null==(c=this.prepareSendMessagesRequest)?void 0:c.call(this,{api:this.api,id:b.chatId,messages:b.messages,body:{...h,...b.body},headers:{...i,...b.headers},credentials:j,requestMetadata:b.metadata,trigger:b.trigger,messageId:b.messageId})),l=null!=(d=null==k?void 0:k.api)?d:this.api,m=(null==k?void 0:k.headers)!==void 0?k.headers:{...i,...b.headers},n=(null==k?void 0:k.body)!==void 0?k.body:{...h,...b.body,id:b.chatId,messages:b.messages,trigger:b.trigger,messageId:b.messageId},o=null!=(e=null==k?void 0:k.credentials)?e:j,p=null!=(f=this.fetch)?f:globalThis.fetch,q=await p(l,{method:"POST",headers:{"Content-Type":"application/json",...m},body:JSON.stringify(n),credentials:o,signal:a});if(!q.ok)throw Error(null!=(g=await q.text())?g:"Failed to fetch the chat response.");if(!q.body)throw Error("The response body is empty.");return this.processResponseStream(q.body)}async reconnectToStream(a){var b,c,d,e,f;let g=await bi(this.body),h=await bi(this.headers),i=await bi(this.credentials),j=await (null==(b=this.prepareReconnectToStreamRequest)?void 0:b.call(this,{api:this.api,id:a.chatId,body:{...g,...a.body},headers:{...h,...a.headers},credentials:i,requestMetadata:a.metadata})),k=null!=(c=null==j?void 0:j.api)?c:`${this.api}/${a.chatId}/stream`,l=(null==j?void 0:j.headers)!==void 0?j.headers:{...h,...a.headers},m=null!=(d=null==j?void 0:j.credentials)?d:i,n=null!=(e=this.fetch)?e:globalThis.fetch,o=await n(k,{method:"GET",headers:l,credentials:m});if(204===o.status)return null;if(!o.ok)throw Error(null!=(f=await o.text())?f:"Failed to fetch the chat response.");if(!o.body)throw Error("The response body is empty.");return this.processResponseStream(o.body)}},eY=class extends eX{constructor(a={}){super(a)}processResponseStream(a){return(function({stream:a,schema:b}){return a.pipeThrough(new TextDecoderStream).pipeThrough(new aa).pipeThrough(new TransformStream({async transform({data:a},c){"[DONE]"!==a&&c.enqueue(await bh({text:a,schema:b}))}}))})({stream:a,schema:ez}).pipeThrough(new TransformStream({async transform(a,b){if(!a.success)throw a.error;b.enqueue(a.value)}}))}};function eZ(a){if(!a||"assistant"!==a.role)return!1;let b=a.parts.reduce((a,b,c)=>"step-start"===b.type?c:a,-1),c=a.parts.slice(b+1).filter(eB);return c.length>0&&c.every(a=>"output-available"===a.state)}var e$=class{constructor({generateId:a=bb,id:b=a(),transport:c=new eY,maxSteps:d=1,messageMetadataSchema:e,dataPartSchemas:f,state:g,onError:h,onToolCall:i,onFinish:j,onData:k}){this.activeResponse=void 0,this.jobExecutor=new eE,this.sendMessage=async(a,b={})=>{var c,d,e;let f;if(f="text"in a||"files"in a?{parts:[...Array.isArray(a.files)?a.files:await eW(a.files),..."text"in a&&null!=a.text?[{type:"text",text:a.text}]:[]]}:a,null!=a.messageId){let b=this.state.messages.findIndex(b=>b.id===a.messageId);if(-1===b)throw Error(`message with id ${a.messageId} not found`);if("user"!==this.state.messages[b].role)throw Error(`message with id ${a.messageId} is not a user message`);this.state.messages=this.state.messages.slice(0,b+1),this.state.replaceMessage(b,{...f,id:a.messageId,role:null!=(c=f.role)?c:"user",metadata:a.metadata})}else this.state.pushMessage({...f,id:null!=(d=f.id)?d:this.generateId(),role:null!=(e=f.role)?e:"user",metadata:a.metadata});await this.makeRequest({trigger:"submit-user-message",messageId:a.messageId,...b})},this.regenerate=async({messageId:a,...b}={})=>{let c=null==a?this.state.messages.length-1:this.state.messages.findIndex(b=>b.id===a);if(-1===c)throw Error(`message ${a} not found`);this.state.messages=this.state.messages.slice(0,"assistant"===this.messages[c].role?c:c+1),await this.makeRequest({trigger:"regenerate-assistant-message",messageId:a,...b})},this.resumeStream=async(a={})=>{await this.makeRequest({trigger:"resume-stream",...a})},this.addToolResult=async({toolCallId:a,output:b})=>{this.jobExecutor.run(async()=>{(function({messages:a,toolCallId:b,output:c}){let d=a[a.length-1].parts.find(a=>eB(a)&&a.toolCallId===b);null!=d&&(d.state="output-available",d.output=c)})({messages:this.state.messages,toolCallId:a,output:b}),this.messages=this.state.messages,"submitted"!==this.status&&"streaming"!==this.status&&eZ(this.lastMessage)&&this.makeRequest({trigger:"submit-tool-result"})})},this.stop=async()=>{var a;("streaming"===this.status||"submitted"===this.status)&&(null==(a=this.activeResponse)?void 0:a.abortController)&&this.activeResponse.abortController.abort()},this.id=b,this.maxSteps=d,this.transport=c,this.generateId=a,this.messageMetadataSchema=e,this.dataPartSchemas=f,this.state=g,this.onError=h,this.onToolCall=i,this.onFinish=j,this.onData=k}get status(){return this.state.status}setStatus({status:a,error:b}){this.status!==a&&(this.state.status=a,this.state.error=b)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(a){this.state.messages=a}async makeRequest({trigger:a,metadata:b,headers:c,body:d,messageId:e}){var f,g;this.setStatus({status:"submitted",error:void 0});let h=this.state.messages.length,i=this.lastMessage,j=null!=(f=null==i?void 0:i.parts.filter(a=>"step-start"===a.type).length)?f:0;try{let f,h={state:function({lastMessage:a,messageId:b}){return{message:(null==a?void 0:a.role)==="assistant"?a:{id:b,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}({lastMessage:this.state.snapshot(i),messageId:this.generateId()}),abortController:new AbortController};if(this.activeResponse=h,"resume-stream"===a){let a=await this.transport.reconnectToStream({chatId:this.id,metadata:b,headers:c,body:d});if(null==a)return;f=a}else f=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:h.abortController.signal,metadata:b,headers:c,body:d,trigger:a,messageId:e});let j=a=>this.jobExecutor.run(()=>a({state:h.state,write:()=>{var a;this.setStatus({status:"streaming"}),h.state.message.id===(null==(a=this.lastMessage)?void 0:a.id)?this.state.replaceMessage(this.state.messages.length-1,h.state.message):this.state.pushMessage(h.state.message)}}));await eD({stream:function({stream:a,onToolCall:b,messageMetadataSchema:c,dataPartSchemas:d,runUpdateMessageJob:e,onError:f,onData:g}){return a.pipeThrough(new TransformStream({async transform(a,h){await e(async({state:e,write:i})=>{var j,k,l,m;function n(a){var b;let c=e.message.parts.find(b=>eB(b)&&b.toolCallId===a.toolCallId);null!=c?(c.state=a.state,c.input=a.input,c.output=a.output,c.errorText=a.errorText,c.providerExecuted=null!=(b=a.providerExecuted)?b:c.providerExecuted,null!=a.providerMetadata&&"input-available"===c.state&&(c.callProviderMetadata=a.providerMetadata)):e.message.parts.push({type:`tool-${a.toolName}`,toolCallId:a.toolCallId,state:a.state,input:a.input,output:a.output,errorText:a.errorText,providerExecuted:a.providerExecuted,...null!=a.providerMetadata?{callProviderMetadata:a.providerMetadata}:{}})}async function o(a){if(null!=a){let b=null!=e.message.metadata?function a(b,c){if(void 0===b&&void 0===c)return;if(void 0===b)return c;if(void 0===c)return b;let d={...b};for(let e in c)if(Object.prototype.hasOwnProperty.call(c,e)){let f=c[e];if(void 0===f)continue;let g=e in b?b[e]:void 0,h=null!==f&&"object"==typeof f&&!Array.isArray(f)&&!(f instanceof Date)&&!(f instanceof RegExp),i=null!=g&&"object"==typeof g&&!Array.isArray(g)&&!(g instanceof Date)&&!(g instanceof RegExp);h&&i?d[e]=a(g,f):d[e]=f}return d}(e.message.metadata,a):a;null!=c&&await bf({value:b,schema:c}),e.message.metadata=b}}switch(a.type){case"text-start":{let b={type:"text",text:"",providerMetadata:a.providerMetadata,state:"streaming"};e.activeTextParts[a.id]=b,e.message.parts.push(b),i();break}case"text-delta":{let b=e.activeTextParts[a.id];b.text+=a.delta,b.providerMetadata=null!=(j=a.providerMetadata)?j:b.providerMetadata,i();break}case"text-end":{let b=e.activeTextParts[a.id];b.state="done",b.providerMetadata=null!=(k=a.providerMetadata)?k:b.providerMetadata,delete e.activeTextParts[a.id],i();break}case"reasoning-start":{let b={type:"reasoning",text:"",providerMetadata:a.providerMetadata,state:"streaming"};e.activeReasoningParts[a.id]=b,e.message.parts.push(b),i();break}case"reasoning-delta":{let b=e.activeReasoningParts[a.id];b.text+=a.delta,b.providerMetadata=null!=(l=a.providerMetadata)?l:b.providerMetadata,i();break}case"reasoning-end":{let b=e.activeReasoningParts[a.id];b.providerMetadata=null!=(m=a.providerMetadata)?m:b.providerMetadata,b.state="done",delete e.activeReasoningParts[a.id],i();break}case"file":e.message.parts.push({type:"file",mediaType:a.mediaType,url:a.url}),i();break;case"source-url":e.message.parts.push({type:"source-url",sourceId:a.sourceId,url:a.url,title:a.title,providerMetadata:a.providerMetadata}),i();break;case"source-document":e.message.parts.push({type:"source-document",sourceId:a.sourceId,mediaType:a.mediaType,title:a.title,filename:a.filename,providerMetadata:a.providerMetadata}),i();break;case"tool-input-start":{let b=e.message.parts.filter(eB);e.partialToolCalls[a.toolCallId]={text:"",toolName:a.toolName,index:b.length},n({toolCallId:a.toolCallId,toolName:a.toolName,state:"input-streaming",input:void 0,providerExecuted:a.providerExecuted}),i();break}case"tool-input-delta":{let b=e.partialToolCalls[a.toolCallId];b.text+=a.inputTextDelta;let{value:c}=await eA(b.text);n({toolCallId:a.toolCallId,toolName:b.toolName,state:"input-streaming",input:c}),i();break}case"tool-input-available":if(n({toolCallId:a.toolCallId,toolName:a.toolName,state:"input-available",input:a.input,providerExecuted:a.providerExecuted,providerMetadata:a.providerMetadata}),i(),b&&!a.providerExecuted){let c=await b({toolCall:a});null!=c&&(n({toolCallId:a.toolCallId,toolName:a.toolName,state:"output-available",input:a.input,output:c}),i())}break;case"tool-output-available":{let b=e.message.parts.filter(eB);if(null==b)throw Error("tool_result must be preceded by a tool_call");let c=b.findIndex(b=>b.toolCallId===a.toolCallId);if(-1===c)throw Error("tool_result must be preceded by a tool_call with the same toolCallId");let d=eC(b[c]);n({toolCallId:a.toolCallId,toolName:d,state:"output-available",input:b[c].input,output:a.output,providerExecuted:a.providerExecuted}),i();break}case"tool-output-error":{let b=e.message.parts.filter(eB);if(null==b)throw Error("tool_result must be preceded by a tool_call");let c=b.findIndex(b=>b.toolCallId===a.toolCallId);if(-1===c)throw Error("tool_result must be preceded by a tool_call with the same toolCallId");let d=eC(b[c]);n({toolCallId:a.toolCallId,toolName:d,state:"output-error",input:b[c].input,errorText:a.errorText,providerExecuted:a.providerExecuted}),i();break}case"start-step":e.message.parts.push({type:"step-start"});break;case"finish-step":e.activeTextParts={},e.activeReasoningParts={};break;case"start":null!=a.messageId&&(e.message.id=a.messageId),await o(a.messageMetadata),(null!=a.messageId||null!=a.messageMetadata)&&i();break;case"finish":case"message-metadata":await o(a.messageMetadata),null!=a.messageMetadata&&i();break;case"error":null==f||f(Error(a.errorText));break;default:if(a.type.startsWith("data-")){if((null==d?void 0:d[a.type])!=null&&await bf({value:a.data,schema:d[a.type]}),a.transient){null==g||g(a);break}let b=null!=a.id?e.message.parts.find(b=>a.type===b.type&&a.id===b.id):void 0;null!=b?b.data=a.data:e.message.parts.push(a),null==g||g(a),i()}}h.enqueue(a)})}}))}({stream:f,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob:j,onError:a=>{throw a}}),onError:a=>{throw a}}),null==(g=this.onFinish)||g.call(this,{message:h.state.message}),this.setStatus({status:"ready"})}catch(a){if("AbortError"===a.name)return this.setStatus({status:"ready"}),null;this.onError&&a instanceof Error&&this.onError(a),this.setStatus({status:"error",error:a})}finally{this.activeResponse=void 0}(function({originalMaxToolInvocationStep:a,originalMessageCount:b,maxSteps:c,messages:d}){let e=d[d.length-1],f=e.parts.filter(a=>"step-start"===a.type).length;return c>1&&null!=e&&(d.length>b||f!==a)&&eZ(e)&&f<c})({originalMaxToolInvocationStep:j,originalMessageCount:h,maxSteps:this.maxSteps,messages:this.state.messages})&&await this.makeRequest({metadata:b,headers:c,body:d,trigger:"submit-tool-result"})}},e_=c(7464),e0=(a,b,c)=>{if(!b.has(a))throw TypeError("Cannot "+c)},e1=(a,b,c)=>(e0(a,b,"read from private field"),c?c.call(a):b.get(a)),e2=(a,b,c)=>{if(b.has(a))throw TypeError("Cannot add the same private member more than once");b instanceof WeakSet?b.add(a):b.set(a,c)},e3=(a,b,c,d)=>(e0(a,b,"write to private field"),d?d.call(a,c):b.set(a,c),c),e4=class{constructor(a=[]){e2(this,k,void 0),e2(this,l,"ready"),e2(this,m,void 0),e2(this,n,new Set),e2(this,o,new Set),e2(this,p,new Set),this.pushMessage=a=>{e3(this,k,e1(this,k).concat(a)),e1(this,q).call(this)},this.popMessage=()=>{e3(this,k,e1(this,k).slice(0,-1)),e1(this,q).call(this)},this.replaceMessage=(a,b)=>{e3(this,k,[...e1(this,k).slice(0,a),this.snapshot(b),...e1(this,k).slice(a+1)]),e1(this,q).call(this)},this.snapshot=a=>structuredClone(a),this["~registerMessagesCallback"]=(a,b)=>{let c=b?function(a,b){return null!=b?e_(a,b):a}(a,b):a;return e1(this,n).add(c),()=>{e1(this,n).delete(c)}},this["~registerStatusCallback"]=a=>(e1(this,o).add(a),()=>{e1(this,o).delete(a)}),this["~registerErrorCallback"]=a=>(e1(this,p).add(a),()=>{e1(this,p).delete(a)}),e2(this,q,()=>{e1(this,n).forEach(a=>a())}),e2(this,r,()=>{e1(this,o).forEach(a=>a())}),e2(this,s,()=>{e1(this,p).forEach(a=>a())}),e3(this,k,a)}get status(){return e1(this,l)}set status(a){e3(this,l,a),e1(this,r).call(this)}get error(){return e1(this,m)}set error(a){e3(this,m,a),e1(this,s).call(this)}get messages(){return e1(this,k)}set messages(a){e3(this,k,[...a]),e1(this,q).call(this)}};k=new WeakMap,l=new WeakMap,m=new WeakMap,n=new WeakMap,o=new WeakMap,p=new WeakMap,q=new WeakMap,r=new WeakMap,s=new WeakMap;var e5=class extends e${constructor({messages:a,...b}){let c=new e4(a);super({...b,state:c}),e2(this,t,void 0),this["~registerMessagesCallback"]=(a,b)=>e1(this,t)["~registerMessagesCallback"](a,b),this["~registerStatusCallback"]=a=>e1(this,t)["~registerStatusCallback"](a),this["~registerErrorCallback"]=a=>e1(this,t)["~registerErrorCallback"](a),e3(this,t,c)}};function e6(){let a=(0,w.useRef)(null),b=(0,w.useRef)(null),{config:c,history:d,setHistory:e,hasInteracted:f,setHasInteracted:g,input:h,setInput:i,isWaitingForResponse:j,setIsWaitingForResponse:k,vimModeActive:l,browserStates:m,activeBrowser:n}=z(),{theme:o,setTheme:p}=(c.useTheme||function(){return{theme:{name:"default",useTypewriter:!0},setTheme:()=>{}}})(),[q,r]=(0,w.useState)(!1),s=function(){let[a,b]=(0,w.useState)("");return a}(),t=function(a,b,c){let[d,e]=(0,w.useState)(!a);return(0,w.useRef)(!1),d}(c.showBootSequence??!0,a=>e(b=>[...b,...a]),c.bootMessages||s&&`> another visitor from ${s}`),{handleKeyDown:v}=function(a,b){let[c,d]=(0,w.useState)(-1);return{handleKeyDown:(0,w.useCallback)(e=>{if("ArrowUp"===e.key){if(e.preventDefault(),c<a.length-1){let e=c+1;d(e),b(a[a.length-1-e].replace(/^> /,""))}}else if("ArrowDown"===e.key)if(e.preventDefault(),c>0){let e=c-1;d(e),b(a[a.length-1-e].replace(/^> /,""))}else 0===c&&(d(-1),b(""))},[a,c,b])}}(d.filter(a=>"input"===a.type).map(a=>a.content),i),{messages:x,sendMessage:y,initializeWithHistory:A}=function({onMessage:a,onLoading:b}){let{messages:c,sendMessage:d,setMessages:e,status:f,error:g}=function({experimental_throttle:a,resume:b=!1,...c}={}){let d=(0,w.useRef)("chat"in c?c.chat:new e5(c));("chat"in c&&c.chat!==d.current||"id"in c&&d.current.id!==c.id)&&(d.current="chat"in c?c.chat:new e5(c));let e="id"in c?c.id:null,f=(0,w.useCallback)(b=>d.current["~registerMessagesCallback"](b,a),[a,e]),g=(0,w.useSyncExternalStore)(f,()=>d.current.messages,()=>d.current.messages),h=(0,w.useSyncExternalStore)(d.current["~registerStatusCallback"],()=>d.current.status,()=>d.current.status),i=(0,w.useSyncExternalStore)(d.current["~registerErrorCallback"],()=>d.current.error,()=>d.current.error),j=(0,w.useCallback)(a=>{"function"==typeof a&&(a=a(d.current.messages)),d.current.messages=a},[d]);return(0,w.useEffect)(()=>{b&&d.current.resumeStream()},[b,d]),{id:d.current.id,messages:g,setMessages:j,sendMessage:d.current.sendMessage,regenerate:d.current.regenerate,stop:d.current.stop,error:i,resumeStream:d.current.resumeStream,status:h,addToolResult:d.current.addToolResult}}({transport:new eY({api:"/api/chat"}),onFinish:b=>{let c=b.message||b,d=c.content||c.parts&&c.parts.map(a=>a.text).join("");d&&a(d,!0)}});return{messages:c,sendMessage:d,initializeWithHistory:(0,w.useCallback)(a=>{let b=a.filter(a=>a&&a.content&&a.content.trim()).map(a=>{let b=a.content.replace(/^> /,"").trim();return b?{id:Math.random().toString(36).substring(7),role:"input"===a.type?"user":"assistant",parts:[{type:"text",text:b}]}:null}).filter(a=>null!==a);b.length>0&&e(b)},[e])}}({onMessage:(a,b)=>{b||e(b=>[...b,{type:"output",content:a,typewriter:!1}]),k(!1)},onLoading:r}),{executeCommand:F,replaceLastHistory:H}=function(a,b,c){let{config:d,setBrowserState:e,setActiveBrowser:f,setVimModeActive:g,clearHistory:h}=z(),i=(0,w.useCallback)(b=>{a(a=>{let c=[...a];return c.length>0&&(c[c.length-1]={type:"output",content:b}),c})},[a]),j=(0,w.useCallback)(()=>{d.browsers?.forEach(a=>{e(a.id,{active:!1,visible:!1})}),f(null)},[d.browsers,e,f]);return{executeCommand:(0,w.useCallback)(a=>{let i=a.trim(),k=function(a){let b=a.trim(),[c,...d]=b.split(" ");if("clear"===c||"cls"===c)return"CLEAR_TERMINAL";let e=function(a,b){switch(a){case"ls":{let a=b.includes("-a")||b.includes("-la"),c=I.ls(a);if(0===c.length)return"(empty directory)";return c.join("  ")}case"pwd":return I.pwd();case"cd":if(!b[0])return I.cd("~");return I.cd(b[0]);case"cat":if(!b[0])return"cat: missing operand";return I.cat(b[0]);case"mkdir":return"mkdir: Permission denied (read-only filesystem)";case"rm":return"rm: Permission denied (read-only filesystem)";case"touch":return"touch: Permission denied (read-only filesystem)";default:return null}}(c,d);if(e)return e;let f=function(a,b){switch(a){case"pwd":return"/home/consciousness/material-plane/";case"whoami":return"observer";case"date":return new Date().toString();case"echo":return b.join(" ");case"uname":if(b.includes("-a"))return"MATRIX 5.0.0-consciousness #42 SMP PREEMPT Thu Dec 21 2012 x86_64 GNU/Linux";return"MATRIX";case"uptime":return"up 13,337 days, 7:77, load average: 0.42, 0.69, 1.11";case"history":return`[ACCESSING AKASHIC RECORDS]
[ERROR: PAST LIVES ENCRYPTED]`;case"which":if(b[0])return`/usr/bin/${b[0]}`;return"";case"hostname":return"terminal.gorka.dev";case"vim":case"vi":return"SHOW_VIM_MODE";case"emacs":case"nano":return"No.";case"reset":return"RESET_CONVERSATION";default:return null}}(c,d);if(f)return f;if(c.startsWith("/"))return G(c.toLowerCase(),d);let g=G(`/${c.toLowerCase()}`,d);return g&&!("string"==typeof g?g:g.content).includes("Command not found")?g:b.startsWith("/")?`Command not found: ${c}
Type /help for available commands.`:null}(i);if("CLEAR_TERMINAL"===k)return h(),null;if(k&&"object"==typeof k&&"content"in k){if("SHOW_HELP_BROWSER"===k.content){let a=d.browsers?.find(a=>"help"===a.id);if(a)return j(),e(a.id,{active:!0,visible:!0,selectedIndex:0}),f(a.id),a.formatter?a.formatter(a.component):a.component}return k}if(k)return k;let l=i.split(" "),m=l[0].toLowerCase(),n=l.slice(1),o=d.browsers?.find(a=>a.id===m);return o?(j(),e(o.id,{active:!0,visible:!0,selectedIndex:0}),f(o.id),o.formatter?o.formatter(o.component):o.component):"vim"===m&&d.enableVimMode?(g(!0),"Entering Vim mode. Press Escape to exit."):d.customCommands?.[m]?d.customCommands[m](n):"theme"===m&&d.enableThemes&&b?"Theme browser coming soon...":c?(c({text:a}),null):`Command not found: ${m}. Type 'help' for available commands.`},[d,e,f,j,g,c,b,h]),replaceLastHistory:i,closeAllBrowsers:j}}(e,c.enableThemes?p:void 0,c.aiEnabled?y:void 0);!function({enabled:a,onClear:b,onEscape:c}){}({enabled:!l&&t&&f,onClear:()=>e([])});let J=(0,w.useCallback)(()=>{t&&b.current&&!l&&b.current.focus()},[t,l]),K=c.browsers?.find(a=>a.id===n);return(0,u.jsx)(C,{children:(0,u.jsx)("div",{className:"w-full h-full bg-black text-green-400 font-mono p-2 sm:p-4 overflow-hidden text-xs sm:text-sm",onClick:J,children:(0,u.jsxs)("div",{ref:a,className:"h-[calc(100vh-1rem)] sm:h-[calc(100vh-2rem)] overflow-y-auto scrollbar-hide focus-blur",children:[t&&!f&&(0,u.jsx)("div",{className:"whitespace-pre-wrap mb-1 text-green-400",children:c.welcomeMessage||`Welcome to ${c.projectName}. Type /help to start.`}),(()=>{let a=[],b=0,c=0,e=x.filter(a=>"assistant"===a.role);for(;b<d.length||c<e.length;){for(;b<d.length&&"input"===d[b].type;)if(a.push({type:"history",content:d[b].content,isTypewriter:d[b].typewriter,key:`history-${b}`}),b++,c<e.length){let b=e[c],d=b.content||b.parts?.filter(a=>"text"===a.type).map(a=>a.text).join("")||"";a.push({type:"ai",content:d,key:`ai-${b.id}`}),c++}b<d.length&&"input"!==d[b].type&&(a.push({type:"history",content:d[b].content,isTypewriter:d[b].typewriter,key:`history-${b}`}),b++)}return a.map(a=>(0,u.jsx)("div",{className:"whitespace-pre-wrap mb-1 text-green-400",children:a.isTypewriter?(0,u.jsx)(D,{text:a.content,onComplete:()=>{}}):a.content},a.key))})(),K&&m[n]?.visible&&(0,u.jsx)("div",{className:"mt-4",children:K.component}),t&&(0,u.jsx)(B,{ref:b,value:h,onChange:i,onKeyDown:a=>{if("Enter"===a.key){if(t&&""!==h.trim()){if(g(!0),e(a=>[...a,{type:"input",content:`> ${h}`}]),h.startsWith("/")&&c.aiEnabled)k(!0),y({text:h});else{let a=F(h);null!==a&&e(b=>[...b,{type:"output",content:a,typewriter:!1}])}i("")}}else v(a)},disabled:q||j||l,showPlaceholder:!f}),l&&c.enableVimMode&&(0,u.jsx)(E,{})]})})})}function e7({config:a}){let b=(0,u.jsx)(y,{config:a,children:(0,u.jsx)(e6,{})});return a.contextWrapper?a.contextWrapper(b):b}function e8(){let a={projectName:"cybertantra",welcomeMessage:"AI-powered terminal for exploring consciousness. type /help to start",browsers:[{id:"search",name:"Search",component:(0,u.jsx)("div",{children:"Search lecture database (coming soon)"})},{id:"query",name:"Query",component:(0,u.jsx)("div",{children:"Advanced AI query with context (coming soon)"})}],customCommands:{search:a=>`Searching for: ${a.join(" ")}...`,query:a=>`Querying knowledge base: ${a.join(" ")}...`},showBootSequence:!0,bootMessages:["> initializing cybertantra...","> loading knowledge base...","> connecting to AI consciousness...","> ready."],aiEnabled:!0,aiEndpoint:"/api/chat",enableVimMode:!1,enableThemes:!0,enableFileSystem:!1,useTheme:v.D};return(0,u.jsx)(e7,{config:a})}t=new WeakMap},8354:a=>{"use strict";a.exports=require("util")},9121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[471,191],()=>b(b.s=5706));module.exports=c})();